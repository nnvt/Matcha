"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@babel/runtime/helpers/extends"),r=require("@babel/runtime/helpers/objectWithoutPropertiesLoose"),t=require("react"),s=require("react-three-fiber"),a=require("react-merge-refs"),n=require("three"),i=require("three/examples/jsm/postprocessing/EffectComposer"),o=require("three/examples/jsm/postprocessing/RenderPass"),u=require("three/examples/jsm/postprocessing/ShaderPass"),d=require("three/examples/jsm/shaders/GammaCorrectionShader");function c(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var l=c(e),m=c(r),f=c(a);s.extend({EffectComposer:i.EffectComposer,RenderPass:o.RenderPass,ShaderPass:u.ShaderPass});var h=function(){try{var e=document.createElement("canvas");return!(!window.WebGL2RenderingContext||!e.getContext("webgl2"))}catch(e){return!1}},p=t.forwardRef((function(e,r){var a=e.children,i=e.multisamping,o=void 0===i?8:i,u=e.renderIndex,c=void 0===u?1:u,p=e.disableGamma,g=void 0!==p&&p,b=e.disableRenderPass,v=void 0!==b&&b,x=m.default(e,["children","multisamping","renderIndex","disableGamma","disableRenderPass"]),P=t.useRef(),R=s.useThree(),q=R.scene,E=R.camera,G=R.gl,C=R.size,j=t.useState((function(){if(h()&&o>0){var e=new n.WebGLMultisampleRenderTarget(C.width,C.height,{format:n.RGBAFormat,encoding:n.sRGBEncoding});return e.samples=8,e}}))[0];return t.useEffect((function(){var e,r;null==(e=P.current)||e.setSize(C.width,C.height),null==(r=P.current)||r.setPixelRatio(G.getPixelRatio())}),[G,C]),s.useFrame((function(){var e;return null==(e=P.current)?void 0:e.render()}),c),t.createElement("effectComposer",l.default({ref:f.default([r,P]),args:[G,j]},x),!v&&t.createElement("renderPass",{attachArray:"passes",args:[q,E]}),!g&&t.createElement("shaderPass",{attachArray:"passes",args:[d.GammaCorrectionShader]}),a)}));exports.Effects=p,exports.isWebGL2Available=h;
