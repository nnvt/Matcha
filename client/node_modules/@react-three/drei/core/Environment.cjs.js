"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),r=require("react-three-fiber"),n=require("three"),t=require("three/examples/jsm/loaders/RGBELoader"),o=require("use-asset"),s=require("../helpers/environment-assets.cjs.js");exports.Environment=function(u){var i=u.background,a=void 0!==i&&i,c=u.files,d=void 0===c?["px.png","nx.png","py.png","ny.png","pz.png","nz.png"]:c,p=u.path,f=void 0===p?"/":p,b=u.preset,m=void 0===b?void 0:b,v=u.scene;if(m){if(!(m in s.presetsObj))throw new Error("Preset must be one of: "+Object.keys(s.presetsObj).join(", "));d=s.presetsObj[m],f="https://rawcdn.githack.com/mattrossman/drei-assets/b597559ff62f85ec691df28cbea5ecb1263a2085/hdri/"}var g=r.useThree(),h=g.gl,l=g.scene,j=Array.isArray(d),k=j?n.CubeTextureLoader:t.RGBELoader,q=r.useLoader(k,j?[d]:d,(function(e){return e.setPath(f)})),x=j?q[0]:q,E=o.useAsset((function(){return new Promise((function(e){var r=new n.PMREMGenerator(h),t=function(e,r,n){return n?(r.compileEquirectangularShader(),r.fromCubemap(e).texture):r.fromEquirectangular(e).texture}(x,r,j);r.dispose(),x.dispose(),e(t)}))}),x);return e.useLayoutEffect((function(){var e=v?v.background:l.background,r=v?v.environment:l.environment;return v?(v.environment=E,a&&(v.background=E)):(l.environment=E,a&&(l.background=E)),function(){v?(v.environment=r,v.background=e):(l.environment=r,l.background=e)}}),[E,a,v]),null};
