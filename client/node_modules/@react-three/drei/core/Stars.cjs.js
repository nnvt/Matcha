"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("react-three-fiber"),r=require("three");function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var a=o(require("@babel/runtime/helpers/inheritsLoose")),n=function(e){function t(){return e.call(this,{uniforms:{time:{value:0},fade:{value:1}},vertexShader:"uniform float time;\n      attribute float size;\n      varying vec3 vColor;\n      void main() {\n        vColor = color;\n        vec4 mvPosition = modelViewMatrix * vec4(position, 0.5);\n        gl_PointSize = size * (30.0 / -mvPosition.z) * (3.0 + sin(mvPosition.x + 2.0 * time + 100.0));\n        gl_Position = projectionMatrix * mvPosition;\n      }",fragmentShader:"uniform sampler2D pointTexture;\n      uniform float fade;\n      varying vec3 vColor;\n      void main() {\n        float opacity = 1.0;\n        if (fade == 1.0) {\n          float d = distance(gl_PointCoord, vec2(0.5, 0.5));\n          opacity = 1.0 / (1.0 + exp(16.0 * (d - 0.25)));\n        }\n        gl_FragColor = vec4(vColor, opacity);\n      }"})||this}return a.default(t,e),t}(r.ShaderMaterial),i=function(e){return(new r.Vector3).setFromSpherical(new r.Spherical(e,Math.acos(1-2*Math.random()),2*Math.random()*Math.PI))},u=e.forwardRef((function(o,a){var u=o.radius,c=void 0===u?100:u,l=o.depth,s=void 0===l?50:l,f=o.count,d=void 0===f?5e3:f,m=o.saturation,v=void 0===m?0:m,h=o.factor,p=void 0===h?4:h,b=o.fade,g=void 0!==b&&b,y=e.useRef(),M=e.useMemo((function(){for(var e=[],t=[],o=Array.from({length:d},(function(){return(.5+.5*Math.random())*p})),a=new r.Color,n=c+s,u=s/d,l=0;l<d;l++)n-=u*Math.random(),e.push.apply(e,i(n).toArray()),a.setHSL(l/d,v,.9),t.push(a.r,a.g,a.b);return[new Float32Array(e),new Float32Array(t),new Float32Array(o)]}),[d,s,p,c,v]),w=M[0],x=M[1],A=M[2];t.useFrame((function(e){return y.current&&(y.current.uniforms.time.value=e.clock.getElapsedTime())}));var P=e.useState((function(){return new n}))[0];return e.createElement("points",{ref:a},e.createElement("bufferGeometry",{attach:"geometry"},e.createElement("bufferAttribute",{attachObject:["attributes","position"],args:[w,3]}),e.createElement("bufferAttribute",{attachObject:["attributes","color"],args:[x,3]}),e.createElement("bufferAttribute",{attachObject:["attributes","size"],args:[A,1]})),e.createElement("primitive",{dispose:void 0,ref:y,object:P,attach:"material",blending:r.AdditiveBlending,"uniforms-fade-value":g,transparent:!0,vertexColors:!0}))}));exports.Stars=u;
