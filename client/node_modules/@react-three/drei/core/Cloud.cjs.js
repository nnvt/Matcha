"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),require("blob-polyfill"),require("../helpers/base64.cjs.js");var e=require("../assets/cloud.base64.cjs.js");require("@babel/runtime/helpers/extends");var r=require("@babel/runtime/helpers/objectWithoutPropertiesLoose"),t=require("react"),a=require("react-three-fiber");require("./shapes.cjs.js"),require("react-merge-refs");var i=require("./Billboard.cjs.js");require("three");var o=require("./useTexture.cjs.js");function s(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=s(r);exports.Cloud=function(r){var s=r.opacity,u=void 0===s?.5:s,c=r.speed,l=void 0===c?.4:c,d=r.width,h=void 0===d?10:d,p=r.length,m=void 0===p?1.5:p,f=r.segments,v=void 0===f?20:f,b=r.dir,j=void 0===b?1:b,M=n.default(r,["opacity","speed","width","length","segments","dir"]),q=t.useRef(),y=o.useTexture(e),x=t.useMemo((function(){return[].concat(new Array(v)).map((function(e,r){return{x:h/2-Math.random()*h,y:h/2-Math.random()*h,scale:.4+Math.sin((r+1)/v*Math.PI)*(10*(.2+Math.random())),density:Math.max(.2,Math.random()),rotation:Math.max(.002,.005*Math.random())*l}}))}),[h,v,l]);return a.useFrame((function(e){var r;return null==(r=q.current)?void 0:r.children.forEach((function(r,t){r.rotation.z+=x[t].rotation*j,r.scale.setScalar(x[t].scale+(1+Math.sin(e.clock.getElapsedTime()/10))/2*t/10)}))})),t.createElement("group",M,t.createElement("group",{position:[0,0,v/2*m],ref:q},x.map((function(e,r){var a=e.x,o=e.y,s=e.scale,n=e.density;return t.createElement(i.Billboard,{key:r,scale:[s,s,s],position:[a,o,-r*m],lockZ:!0},t.createElement("meshStandardMaterial",{map:y,transparent:!0,opacity:s/6*n*u,depthTest:!1}))}))))};
