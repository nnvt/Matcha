{"ast":null,"code":"import \"antd/lib/popconfirm/style\";\nimport _Popconfirm from \"antd/lib/popconfirm\";\nimport \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nimport \"antd/lib/auto-complete/style\";\nimport _AutoComplete from \"antd/lib/auto-complete\";\nimport \"antd/lib/tag/style\";\nimport _Tag from \"antd/lib/tag\";\nimport \"antd/lib/date-picker/style\";\nimport _DatePicker from \"antd/lib/date-picker\";\nimport \"antd/lib/radio/style\";\nimport _Radio from \"antd/lib/radio\";\nimport \"antd/lib/row/style\";\nimport _Row from \"antd/lib/row\";\nimport \"antd/lib/col/style\";\nimport _Col from \"antd/lib/col\";\nimport \"antd/lib/input/style\";\nimport _Input from \"antd/lib/input\";\nimport \"antd/lib/divider/style\";\nimport _Divider from \"antd/lib/divider\";\nimport \"antd/lib/avatar/style\";\nimport _Avatar from \"antd/lib/avatar\";\nimport \"antd/lib/message/style\";\nimport _message from \"antd/lib/message\";\nimport \"antd/lib/form/style\";\nimport _Form from \"antd/lib/form\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\ADMIN\\\\Desktop\\\\Matcha\\\\client\\\\src\\\\components\\\\General.js\",\n    _s2 = $RefreshSig$();\n\nimport React, { useState, useContext, useEffect, useRef, useCallback } from \"react\";\nimport axios from \"axios\";\nimport { UserOutlined, PlusOutlined, CloseOutlined, MailOutlined, DeleteOutlined } from \"@ant-design/icons\";\nimport \"leaflet/dist/leaflet.css\";\nimport \"react-leaflet-search/css/index.css\";\nimport \"../assets/css/general.less\";\nimport { Context } from \"../Contexts/Context\";\nimport moment from \"moment\";\nimport { Map, TileLayer, Marker, Popup } from \"react-leaflet\";\nimport Search from \"react-leaflet-search\";\nimport \"leaflet/dist/leaflet.css\";\nimport \"react-leaflet-search/css/index.css\";\nimport L from \"leaflet\";\nimport ImageUploading from \"react-images-uploading\";\nimport { infoUpdate, changeLocation, changeProfile, changeGallery, removeGallery } from \"../actions/editActions\";\nimport { openMessageSuccess, openMessageError } from \"../helper/Verifications\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const General = () => {\n  _s2();\n\n  var _s = $RefreshSig$();\n\n  const {\n    state,\n    dispatch\n  } = useContext(Context); //! Informations\n\n  const [userInfos, setUserInfos] = useState({\n    id: \"\",\n    firstname: \"\",\n    lastname: \"\",\n    email: \"\",\n    username: \"\",\n    gender: \"\",\n    looking: \"\",\n    birthday: \"\",\n    bio: \"\",\n    tags: []\n  }); // !Pictures\n\n  const [userPictures, setUserPictures] = useState({\n    profile: [],\n    gallery: []\n  }); // !Location\n\n  const [userLocation, setUserLocation] = useState({\n    lang: \"\",\n    lat: \"\",\n    country: \"\",\n    city: \"\"\n  });\n  const [originalTags, setOriginalTags] = useState([]);\n  const [tags, setTags] = useStateCallback([]);\n  const [options, setOptions] = useStateCallback([]);\n  const [inputVisible, setInputVisible] = useState(false);\n  const [tag, setTag] = useState(\"\");\n  const dateFormat = \"YYYY-MM-DD\";\n\n  const [form] = _Form.useForm(); // ?USE CALLBACK FOR ARRAYS TAGS\n\n\n  function useStateCallback(initialState) {\n    _s();\n\n    const [state, setState] = useState(initialState);\n    const cbRef = useRef(null);\n    const setStateCallback = useCallback((state, cb) => {\n      cbRef.current = cb;\n      setState(state);\n    }, []);\n    useEffect(() => {\n      if (cbRef.current) {\n        cbRef.current(state);\n        cbRef.current = null;\n      }\n    }, [state]);\n    return [state, setStateCallback];\n  } // eslint-disable-next-line\n\n\n  _s(useStateCallback, \"jTdDxQlCAPVP2Mx6g6s2UqDgtDs=\");\n\n  useEffect(async () => {\n    await getTags().then(data => {\n      let tags = data.map(tag => {\n        return \"#\" + tag.name;\n      });\n      setOriginalTags(tags);\n      setOptions(tags.map(t => {\n        return {\n          value: t\n        };\n      }));\n    });\n    let userData = await getUser();\n    userData.tags = userData.tags.map(tag => \"#\" + tag.name);\n    userData.profile = userData.images.reduce((arr, i) => {\n      if (i.profile === 1) arr.push({\n        dataURL: \"http://localhost:3001/api/\" + i.url\n      });\n      return arr;\n    }, []); // eslint-disable-next-line\n\n    userData.images = userData.images.filter(i => {\n      if (i.profile === 0) return \"http://localhost:3001/api/\" + i.url;\n    });\n    userData.birthday = moment(userData.birthday);\n    form.setFieldsValue({\n      birthday: userData.birthday,\n      firstname: userData.firstname,\n      lastname: userData.lastname,\n      username: userData.username,\n      bio: userData.bio,\n      email: userData.email,\n      tags: userData.tags,\n      gender: userData.gender,\n      looking: userData.looking\n    });\n    setUserInfos({\n      birthday: userData.birthday,\n      firstname: userData.firstname,\n      lastname: userData.lastname,\n      username: userData.username,\n      bio: userData.bio,\n      email: userData.email,\n      tags: userData.tags,\n      gender: userData.gender,\n      looking: userData.looking\n    });\n    setTags(userData.tags);\n    setUserLocation({\n      lat: userData.lat,\n      lang: userData.lang,\n      country: userData.country,\n      city: userData.city\n    });\n    setUserPictures({\n      profile: userData.profile,\n      gallery: userData.images\n    }); // eslint-disable-next-line\n  }, []); // ? GET USER INFO\n\n  const getUser = async () => {\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${state.token}`\n      }\n    };\n    let user = await axios.get(\"http://localhost:3001/api/users/find/profile\", config);\n    return { ...user.data\n    };\n  };\n\n  const getTags = async () => {\n    return new Promise(async (resolve, reject) => {\n      await axios.get(\"http://localhost:3001/api/tags/list\").then(res => {\n        resolve(res.data.data);\n      }).catch(error => {\n        reject(error);\n      });\n    });\n  };\n\n  const handleTagClick = () => {\n    setInputVisible(true);\n  };\n\n  const onSearch = searchText => {\n    setTag(searchText); // eslint-disable-next-line\n\n    let filtered = originalTags.filter(t => {\n      if (t.startsWith(searchText)) return t;\n    });\n    if (!searchText) filtered = originalTags;\n    if (filtered.length === 0) filtered = [searchText];\n    setOptions(filtered.map(t => {\n      return {\n        value: t\n      };\n    }));\n  };\n\n  const onSelect = data => {\n    if (userInfos.tags.length <= 4) {\n      if (!tags.filter(t => t === data).length) setTags([...tags, data], data => setUserInfos({ ...userInfos,\n        tags: data\n      }));\n      setTag(\"\");\n      setOptions(originalTags.map(t => {\n        return {\n          value: t\n        };\n      }));\n    }\n  };\n\n  const removeTag = tag => {\n    if (userInfos.tags.length === 1) {} // eslint-disable-next-line\n\n\n    let tagsd = tags.filter(t => {\n      if (t !== tag) return t;\n    });\n    setTags(tagsd, data => setUserInfos({ ...userInfos,\n      tags: data\n    }));\n  };\n\n  const handleUserUpdate = e => {\n    setUserInfos({ ...userInfos,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const handleUserDate = val => {\n    setUserInfos({ ...userInfos,\n      bithday: val\n    });\n  }; // * Submit data info edited for user\n\n\n  const SubmitInfo = async () => {\n    const token = localStorage.getItem(\"token\");\n    const res = await infoUpdate(token, userInfos, dispatch);\n\n    _message.loading(\"Loading...\", 2);\n\n    if (res.success) {\n      openMessageSuccess(res.message);\n    } else {\n      openMessageError(res.error);\n    }\n  }; // * Submit location data\n\n\n  const submitLocation = async () => {\n    const token = localStorage.getItem(\"token\");\n    const res = await changeLocation(token, userLocation);\n\n    _message.loading(\"Loading...\", 2);\n\n    if (res.success) {\n      openMessageSuccess(res.message);\n    } else {\n      openMessageError(res.error);\n    }\n  }; // * Submit Profile\n\n\n  const uploadProfileReq = async ([{\n    file\n  }]) => {\n    const res = await changeProfile(state.token, file);\n\n    _message.loading(\"Loading...\", 2);\n\n    if (res.success) {\n      openMessageSuccess(res.message);\n    } else {\n      openMessageError(res.error);\n    }\n  }; // * Submit Gallery\n\n\n  const uploadGalleryReq = async ({\n    file\n  }) => {\n    const res = await changeGallery(state.token, file);\n\n    _message.loading(\"Loading...\", 2);\n\n    if (res.success) {\n      openMessageSuccess(res.message);\n      return res.data;\n    } else {\n      openMessageError(res.error);\n      return false;\n    }\n  }; // * confirm remove images\n\n\n  async function confirm(id) {\n    const res = await removeGallery(state.token, id);\n\n    _message.loading(\"Loading...\", 2);\n\n    if (res.success) {\n      const newArray = userPictures.gallery.filter(obj => {\n        return obj.id !== id;\n      });\n      setUserPictures({\n        profile: userPictures.profile,\n        gallery: newArray\n      });\n      openMessageSuccess(res.message);\n    } else {\n      openMessageError(res.error);\n    }\n  } // * Cancel remove images\n\n\n  function cancel() {\n    _message.error(\"Click on No\");\n  }\n\n  const galleryUpload = useRef(null);\n\n  const handleProfileUpload = async e => {\n    setUserPictures({ ...userPictures,\n      profile: e\n    });\n    uploadProfileReq(e);\n  };\n\n  const handleGalleryUpload = async e => {\n    const res = await uploadGalleryReq(e[e.length - 1]);\n\n    if (res) {\n      e[e.length - 1] = res;\n      setUserPictures({ ...userPictures,\n        gallery: e\n      });\n    }\n  };\n\n  const position = [userLocation.lat, userLocation.lang];\n\n  const newLocation = e => {\n    setUserLocation({\n      lat: `${e.latLng.lat}`,\n      lang: `${e.latLng.lng}`,\n      city: e.raw[0].address.city || e.raw[0].address.county,\n      country: e.raw[0].address.country\n    });\n  };\n\n  const SearchComponent = () => /*#__PURE__*/_jsxDEV(Search, {\n    position: \"topleft\",\n    provider: \"OpenStreetMap\",\n    onChange: newLocation\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 353,\n    columnNumber: 5\n  }, this);\n\n  L.Icon.Default.imagePath = \"img/\";\n  let rules = {\n    firstname: [{\n      max: 30,\n      message: \"The firstname is too long !\"\n    }, {\n      pattern: new RegExp(/^[A-Za-z]{3,}$/),\n      message: \"The FirstName must be contains letters only at least 3 letters !\"\n    }],\n    lastname: [{\n      max: 30,\n      message: \"The lastname is too long !\"\n    }, {\n      pattern: new RegExp(/^[A-Za-z]{3,}$/),\n      message: \"The lastname must be contains letters only at least 3 letters !\"\n    }],\n    username: [{\n      max: 20,\n      min: 3,\n      message: \"The username should be between 3 and 20 characters !\"\n    }, {\n      pattern: new RegExp(/^[a-zA-Z]+(([-_.]?[a-zA-Z0-9])?)+$/),\n      message: \"The username must be contains letters or numbers ( -, _ or . ) !\"\n    }],\n    email: [{\n      pattern: new RegExp(/[a-zA-Z0-9-_.]{1,50}@[a-zA-Z0-9-_.]{1,50}\\.[a-z0-9]{2,10}$/),\n      message: \"Invalid email address !\"\n    }]\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"general\",\n    children: [/*#__PURE__*/_jsxDEV(ImageUploading, {\n      name: \"profile\",\n      value: userPictures.profile,\n      onChange: e => {\n        handleProfileUpload(e);\n      },\n      maxNumber: 1,\n      children: ({\n        onImageUpdate,\n        imageList\n      }) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"upload__image-wrapper\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"profileImg\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              textAlign: \"center\"\n            },\n            children: !imageList.length ? /*#__PURE__*/_jsxDEV(_Avatar, {\n              size: 200,\n              icon: /*#__PURE__*/_jsxDEV(UserOutlined, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 416,\n                columnNumber: 27\n              }, this),\n              style: {\n                width: \"150px\",\n                height: \"150px\"\n              },\n              onClick: onImageUpdate\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 414,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: /*#__PURE__*/_jsxDEV(_Avatar, {\n                size: 200,\n                src: imageList[0].dataURL,\n                style: {\n                  width: \"150px\",\n                  height: \"150px\"\n                },\n                onClick: onImageUpdate\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 422,\n                columnNumber: 21\n              }, this)\n            }, void 0, false)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 412,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 411,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 410,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 401,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(_Divider, {\n      orientation: \"center\",\n      style: {\n        margin: \"50px 0px\"\n      },\n      children: \"Informations\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 435,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(_Form, {\n      initialValues: userInfos,\n      form: form,\n      children: [/*#__PURE__*/_jsxDEV(_Row, {\n        type: \"flex\",\n        style: {\n          justifyContent: \"space-evenly\",\n          marginBottom: 10\n        },\n        children: [/*#__PURE__*/_jsxDEV(_Col, {\n          md: 11,\n          span: 24,\n          children: /*#__PURE__*/_jsxDEV(_Form.Item, {\n            name: \"firstname\",\n            rules: rules.firstname,\n            children: /*#__PURE__*/_jsxDEV(_Input, {\n              prefix: /*#__PURE__*/_jsxDEV(UserOutlined, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 447,\n                columnNumber: 25\n              }, this),\n              name: \"firstname\",\n              onChange: e => handleUserUpdate(e),\n              placeholder: \"Firstname\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 446,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 445,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 444,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(_Col, {\n          md: 11,\n          span: 24,\n          children: /*#__PURE__*/_jsxDEV(_Form.Item, {\n            name: \"lastname\",\n            rules: rules.lastname,\n            children: /*#__PURE__*/_jsxDEV(_Input, {\n              prefix: /*#__PURE__*/_jsxDEV(UserOutlined, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 457,\n                columnNumber: 25\n              }, this),\n              name: \"lastname\",\n              onChange: e => handleUserUpdate(e),\n              placeholder: \"Lastname\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 456,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 455,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 454,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 440,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(_Row, {\n        type: \"flex\",\n        style: {\n          justifyContent: \"space-evenly\",\n          marginBottom: 10\n        },\n        children: [/*#__PURE__*/_jsxDEV(_Col, {\n          md: 11,\n          span: 24,\n          children: /*#__PURE__*/_jsxDEV(_Form.Item, {\n            name: \"username\",\n            rules: rules.username,\n            children: /*#__PURE__*/_jsxDEV(_Input, {\n              name: \"username\",\n              prefix: /*#__PURE__*/_jsxDEV(UserOutlined, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 473,\n                columnNumber: 25\n              }, this),\n              placeholder: \"Username\",\n              onChange: e => handleUserUpdate(e)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 471,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 470,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 469,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(_Col, {\n          md: 11,\n          span: 24,\n          children: /*#__PURE__*/_jsxDEV(_Form.Item, {\n            name: \"email\",\n            rules: rules.email,\n            children: /*#__PURE__*/_jsxDEV(_Input, {\n              prefix: /*#__PURE__*/_jsxDEV(MailOutlined, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 482,\n                columnNumber: 25\n              }, this),\n              name: \"email\",\n              type: \"email\",\n              onChange: e => handleUserUpdate(e),\n              placeholder: \"Email\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 481,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 480,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 479,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 465,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(_Row, {\n        style: {\n          padding: 20,\n          marginBottom: 10\n        },\n        children: [/*#__PURE__*/_jsxDEV(_Col, {\n          md: 11,\n          span: 24,\n          children: /*#__PURE__*/_jsxDEV(_Form.Item, {\n            name: \"gender\",\n            label: \"Gender\",\n            children: /*#__PURE__*/_jsxDEV(_Radio.Group, {\n              optionType: \"button\",\n              name: \"gender\",\n              onChange: e => handleUserUpdate(e),\n              children: [/*#__PURE__*/_jsxDEV(_Radio.Button, {\n                value: \"male\",\n                children: \"Male\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 499,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(_Radio.Button, {\n                value: \"female\",\n                children: \"Female\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 500,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(_Radio.Button, {\n                value: \"other\",\n                children: \"Other\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 501,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 494,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 493,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 492,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(_Col, {\n          md: 11,\n          span: 24,\n          children: /*#__PURE__*/_jsxDEV(_Form.Item, {\n            name: \"looking\",\n            label: \"Interest\",\n            children: /*#__PURE__*/_jsxDEV(_Radio.Group, {\n              optionType: \"button\",\n              name: \"looking\",\n              onChange: e => handleUserUpdate(e),\n              children: [/*#__PURE__*/_jsxDEV(_Radio.Button, {\n                value: \"male\",\n                children: \"Male\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 512,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(_Radio.Button, {\n                value: \"female\",\n                children: \"Female\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 513,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(_Radio.Button, {\n                value: \"other\",\n                children: \"Other\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 514,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 507,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 506,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 505,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 491,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(_Row, {\n        type: \"flex\",\n        style: {\n          marginBottom: 10,\n          justifyContent: \"space-around\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(_Col, {\n          md: 11,\n          span: 24,\n          children: /*#__PURE__*/_jsxDEV(_Form.Item, {\n            children: /*#__PURE__*/_jsxDEV(_DatePicker, {\n              placeholder: \"Birthdate\",\n              name: \"birthday\",\n              format: dateFormat,\n              style: {\n                width: \"100%\",\n                height: \"38px\",\n                fontSize: \"1rem\",\n                border: \"none\",\n                borderBottom: \"2px solid #d9d9d9\",\n                color: \"black\"\n              },\n              onChange: value => {\n                handleUserDate(value);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 525,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 524,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 523,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(_Col, {\n          md: 11,\n          span: 24,\n          children: /*#__PURE__*/_jsxDEV(_Form.Item, {\n            label: \"Tags\",\n            children: [userInfos.tags.map((tag, index) => /*#__PURE__*/_jsxDEV(_Tag, {\n              className: \"tags\",\n              style: {\n                marginBottom: \"15px\",\n                fontSize: \"15px\",\n                borderRadius: \"6px\",\n                color: \"white\",\n                padding: \"5px 13px\",\n                boxShadow: \"0px 4px 9px rgb(42 139 242 / 20%)\",\n                background: \"linear-gradient(3deg, #60a9f6 0%, #2a8bf2 100%)\"\n              },\n              onClose: () => removeTag(tag),\n              closeIcon: /*#__PURE__*/_jsxDEV(CloseOutlined, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 560,\n                columnNumber: 30\n              }, this),\n              closable: true,\n              children: tag\n            }, tag, false, {\n              fileName: _jsxFileName,\n              lineNumber: 546,\n              columnNumber: 17\n            }, this)), inputVisible && /*#__PURE__*/_jsxDEV(_AutoComplete, {\n              options: options,\n              style: {\n                width: \"110px\",\n                marginRight: \"8px\",\n                verticalAlign: \"top\",\n                marginTop: \"2px\",\n                height: \"30px\"\n              },\n              value: tag,\n              onSelect: onSelect,\n              onSearch: onSearch,\n              placeholder: \"Add tag\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 567,\n              columnNumber: 17\n            }, this), !inputVisible && /*#__PURE__*/_jsxDEV(_Tag, {\n              className: \"site-tag-plus\",\n              onClick: handleTagClick,\n              children: [/*#__PURE__*/_jsxDEV(PlusOutlined, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 584,\n                columnNumber: 19\n              }, this), \" New Tag\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 583,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 544,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 543,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 519,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(_Form.Item, {\n        name: \"bio\",\n        children: /*#__PURE__*/_jsxDEV(_Input.TextArea, {\n          rows: 4,\n          allowClear: true,\n          name: \"bio\",\n          showCount: true,\n          maxLength: 100,\n          placeholder: \"Description\",\n          onChange: e => handleUserUpdate(e)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 591,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 590,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(_Form.Item, {\n        style: {\n          textAlign: \"center\"\n        },\n        children: /*#__PURE__*/_jsxDEV(_Button, {\n          type: \"primary\",\n          htmlType: \"submit\",\n          onClick: e => {\n            form.resetFields();\n            SubmitInfo();\n          },\n          style: {\n            fontSize: \"0.6em\",\n            marginTop: \"20px\",\n            borderRadius: \"8px\",\n            padding: \"4px 20px\"\n          },\n          children: \"Edit Info\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 602,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 601,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 439,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(_Form, {\n      children: [/*#__PURE__*/_jsxDEV(_Divider, {\n        orientation: \"center\",\n        style: {\n          margin: \"50px 0px\"\n        },\n        children: \"Pictures\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 621,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(_Form.Item, {\n        id: \"upload-img\",\n        children: /*#__PURE__*/_jsxDEV(ImageUploading, {\n          multiple: true,\n          name: \"gallery\",\n          value: userPictures.gallery,\n          onChange: handleGalleryUpload,\n          maxNumber: 4,\n          children: ({\n            onImageUpload,\n            imageList\n          }) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"upload__image-wrapper\",\n            children: [/*#__PURE__*/_jsxDEV(_Button, {\n              ref: galleryUpload,\n              style: {\n                display: \"none\"\n              },\n              onClick: onImageUpload\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 634,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"listImage\",\n              children: [imageList.map((image, key) => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"tte\",\n                children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                  src: image.url ? \"http://localhost:3001/api/\" + image.url : image.dataURL,\n                  alt: \"...\",\n                  style: {\n                    width: \"100%\",\n                    height: \"100%\",\n                    position: \"absolute\"\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 643,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(_Popconfirm, {\n                  title: \"Are you sure to delete this image?\",\n                  onConfirm: () => confirm(image.id),\n                  onCancel: cancel,\n                  okText: \"Yes\",\n                  cancelText: \"No\",\n                  style: {\n                    fontSize: \"0.8em\"\n                  },\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"removeImg\",\n                    children: /*#__PURE__*/_jsxDEV(DeleteOutlined, {\n                      style: {\n                        fontSize: \"30px\",\n                        color: \"#fff\"\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 665,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 664,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 656,\n                  columnNumber: 23\n                }, this)]\n              }, key, true, {\n                fileName: _jsxFileName,\n                lineNumber: 642,\n                columnNumber: 21\n              }, this)), userPictures.gallery.length < 4 ? /*#__PURE__*/_jsxDEV(\"div\", {\n                onClick: () => galleryUpload.current.click(),\n                className: \"uploadNextImage\",\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"+ Upload Image\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 677,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 673,\n                columnNumber: 21\n              }, this) : \"\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 640,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 633,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 625,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 624,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 620,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(_Form, {\n      children: [/*#__PURE__*/_jsxDEV(_Divider, {\n        orientation: \"center\",\n        style: {\n          margin: \"50px 0px\"\n        },\n        children: \"Map\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 689,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(_Form.Item, {\n        children: /*#__PURE__*/_jsxDEV(Map, {\n          style: {\n            height: \"500px\",\n            width: \"100wh\"\n          },\n          center: position,\n          zoom: 13,\n          scrollWheelZoom: false,\n          children: [/*#__PURE__*/_jsxDEV(SearchComponent, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 700,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TileLayer, {\n            attribution: \"\\xA9 <a href=\\\"http://osm.org/copyright\\\">OpenStreetMap</a> contributors\",\n            url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 701,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Marker, {\n            position: position,\n            children: /*#__PURE__*/_jsxDEV(Popup, {\n              children: [\"Your are here \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 707,\n                columnNumber: 31\n              }, this), \" We see you.\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 706,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 705,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 694,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 693,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(_Form.Item, {\n        style: {\n          textAlign: \"center\"\n        },\n        children: /*#__PURE__*/_jsxDEV(_Button, {\n          type: \"primary\",\n          htmlType: \"submit\",\n          style: {\n            fontSize: \"0.6em\",\n            marginTop: \"20px\",\n            borderRadius: \"8px\",\n            padding: \"4px 20px\"\n          },\n          onClick: submitLocation,\n          children: \"Edit Location\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 714,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 713,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 688,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 400,\n    columnNumber: 5\n  }, this);\n};\n\n_s2(General, \"1AyU3a9x9CmC7ISp/5Qj86shqoM=\", true, function () {\n  return [_Form.useForm];\n});\n\n_c = General;\n\nvar _c;\n\n$RefreshReg$(_c, \"General\");","map":{"version":3,"sources":["C:/Users/ADMIN/Desktop/Matcha/client/src/components/General.js"],"names":["React","useState","useContext","useEffect","useRef","useCallback","axios","UserOutlined","PlusOutlined","CloseOutlined","MailOutlined","DeleteOutlined","Context","moment","Map","TileLayer","Marker","Popup","Search","L","ImageUploading","infoUpdate","changeLocation","changeProfile","changeGallery","removeGallery","openMessageSuccess","openMessageError","General","state","dispatch","userInfos","setUserInfos","id","firstname","lastname","email","username","gender","looking","birthday","bio","tags","userPictures","setUserPictures","profile","gallery","userLocation","setUserLocation","lang","lat","country","city","originalTags","setOriginalTags","setTags","useStateCallback","options","setOptions","inputVisible","setInputVisible","tag","setTag","dateFormat","form","useForm","initialState","setState","cbRef","setStateCallback","cb","current","getTags","then","data","map","name","t","value","userData","getUser","images","reduce","arr","i","push","dataURL","url","filter","setFieldsValue","config","headers","Authorization","token","user","get","Promise","resolve","reject","res","catch","error","handleTagClick","onSearch","searchText","filtered","startsWith","length","onSelect","removeTag","tagsd","handleUserUpdate","e","target","handleUserDate","val","bithday","SubmitInfo","localStorage","getItem","loading","success","message","submitLocation","uploadProfileReq","file","uploadGalleryReq","confirm","newArray","obj","cancel","galleryUpload","handleProfileUpload","handleGalleryUpload","position","newLocation","latLng","lng","raw","address","county","SearchComponent","Icon","Default","imagePath","rules","max","pattern","RegExp","min","onImageUpdate","imageList","textAlign","width","height","margin","justifyContent","marginBottom","padding","fontSize","border","borderBottom","color","index","borderRadius","boxShadow","background","marginRight","verticalAlign","marginTop","resetFields","onImageUpload","display","image","key","click"],"mappings":"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","sourcesContent":["import React, {\r\n  useState,\r\n  useContext,\r\n  useEffect,\r\n  useRef,\r\n  useCallback,\r\n} from \"react\";\r\nimport {\r\n  Avatar,\r\n  Form,\r\n  Input,\r\n  Tag,\r\n  DatePicker,\r\n  Radio,\r\n  Row,\r\n  Col,\r\n  Button,\r\n  Divider,\r\n  AutoComplete,\r\n  message,\r\n  Popconfirm,\r\n} from \"antd\";\r\nimport axios from \"axios\";\r\nimport {\r\n  UserOutlined,\r\n  PlusOutlined,\r\n  CloseOutlined,\r\n  MailOutlined,\r\n  DeleteOutlined,\r\n} from \"@ant-design/icons\";\r\nimport \"leaflet/dist/leaflet.css\";\r\nimport \"react-leaflet-search/css/index.css\";\r\nimport \"../assets/css/general.less\";\r\nimport { Context } from \"../Contexts/Context\";\r\nimport moment from \"moment\";\r\nimport { Map, TileLayer, Marker, Popup } from \"react-leaflet\";\r\nimport Search from \"react-leaflet-search\";\r\nimport \"leaflet/dist/leaflet.css\";\r\nimport \"react-leaflet-search/css/index.css\";\r\nimport L from \"leaflet\";\r\nimport ImageUploading from \"react-images-uploading\";\r\nimport {\r\n  infoUpdate,\r\n  changeLocation,\r\n  changeProfile,\r\n  changeGallery,\r\n  removeGallery,\r\n} from \"../actions/editActions\";\r\n\r\nimport { openMessageSuccess, openMessageError } from \"../helper/Verifications\";\r\n\r\nexport const General = () => {\r\n  const { state, dispatch } = useContext(Context);\r\n\r\n  //! Informations\r\n  const [userInfos, setUserInfos] = useState({\r\n    id: \"\",\r\n    firstname: \"\",\r\n    lastname: \"\",\r\n    email: \"\",\r\n    username: \"\",\r\n    gender: \"\",\r\n    looking: \"\",\r\n    birthday: \"\",\r\n    bio: \"\",\r\n    tags: [],\r\n  });\r\n  // !Pictures\r\n  const [userPictures, setUserPictures] = useState({\r\n    profile: [],\r\n    gallery: [],\r\n  });\r\n  // !Location\r\n  const [userLocation, setUserLocation] = useState({\r\n    lang: \"\",\r\n    lat: \"\",\r\n    country: \"\",\r\n    city: \"\",\r\n  });\r\n  const [originalTags, setOriginalTags] = useState([]);\r\n  const [tags, setTags] = useStateCallback([]);\r\n  const [options, setOptions] = useStateCallback([]);\r\n  const [inputVisible, setInputVisible] = useState(false);\r\n  const [tag, setTag] = useState(\"\");\r\n  const dateFormat = \"YYYY-MM-DD\";\r\n  const [form] = Form.useForm();\r\n\r\n  // ?USE CALLBACK FOR ARRAYS TAGS\r\n  function useStateCallback(initialState) {\r\n    const [state, setState] = useState(initialState);\r\n    const cbRef = useRef(null);\r\n\r\n    const setStateCallback = useCallback((state, cb) => {\r\n      cbRef.current = cb;\r\n      setState(state);\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n      if (cbRef.current) {\r\n        cbRef.current(state);\r\n        cbRef.current = null;\r\n      }\r\n    }, [state]);\r\n\r\n    return [state, setStateCallback];\r\n  }\r\n  // eslint-disable-next-line\r\n  useEffect(async () => {\r\n    await getTags().then((data) => {\r\n      let tags = data.map((tag) => {\r\n        return \"#\" + tag.name;\r\n      });\r\n      setOriginalTags(tags);\r\n      setOptions(\r\n        tags.map((t) => {\r\n          return { value: t };\r\n        })\r\n      );\r\n    });\r\n\r\n    let userData = await getUser();\r\n\r\n    userData.tags = userData.tags.map((tag) => \"#\" + tag.name);\r\n\r\n    userData.profile = userData.images.reduce((arr, i) => {\r\n      if (i.profile === 1)\r\n        arr.push({ dataURL: \"http://localhost:3001/api/\" + i.url });\r\n      return arr;\r\n    }, []);\r\n    // eslint-disable-next-line\r\n    userData.images = userData.images.filter((i) => {\r\n      if (i.profile === 0) return \"http://localhost:3001/api/\" + i.url;\r\n    });\r\n\r\n    userData.birthday = moment(userData.birthday);\r\n\r\n    form.setFieldsValue({\r\n      birthday: userData.birthday,\r\n      firstname: userData.firstname,\r\n      lastname: userData.lastname,\r\n      username: userData.username,\r\n      bio: userData.bio,\r\n      email: userData.email,\r\n      tags: userData.tags,\r\n      gender: userData.gender,\r\n      looking: userData.looking,\r\n    });\r\n    setUserInfos({\r\n      birthday: userData.birthday,\r\n      firstname: userData.firstname,\r\n      lastname: userData.lastname,\r\n      username: userData.username,\r\n      bio: userData.bio,\r\n      email: userData.email,\r\n      tags: userData.tags,\r\n      gender: userData.gender,\r\n      looking: userData.looking,\r\n    });\r\n\r\n    setTags(userData.tags);\r\n\r\n    setUserLocation({\r\n      lat: userData.lat,\r\n      lang: userData.lang,\r\n      country: userData.country,\r\n      city: userData.city,\r\n    });\r\n    setUserPictures({ profile: userData.profile, gallery: userData.images });\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  // ? GET USER INFO\r\n  const getUser = async () => {\r\n    const config = {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: `Bearer ${state.token}`,\r\n      },\r\n    };\r\n    let user = await axios.get(\r\n      \"http://localhost:3001/api/users/find/profile\",\r\n      config\r\n    );\r\n\r\n    return { ...user.data };\r\n  };\r\n\r\n  const getTags = async () => {\r\n    return new Promise(async (resolve, reject) => {\r\n      await axios\r\n        .get(\"http://localhost:3001/api/tags/list\")\r\n        .then((res) => {\r\n          resolve(res.data.data);\r\n        })\r\n        .catch((error) => {\r\n          reject(error);\r\n        });\r\n    });\r\n  };\r\n\r\n  const handleTagClick = () => {\r\n    setInputVisible(true);\r\n  };\r\n\r\n  const onSearch = (searchText) => {\r\n    setTag(searchText);\r\n    // eslint-disable-next-line\r\n    let filtered = originalTags.filter((t) => {\r\n      if (t.startsWith(searchText)) return t;\r\n    });\r\n    if (!searchText) filtered = originalTags;\r\n    if (filtered.length === 0) filtered = [searchText];\r\n    setOptions(\r\n      filtered.map((t) => {\r\n        return { value: t };\r\n      })\r\n    );\r\n  };\r\n\r\n  const onSelect = (data) => {\r\n    if (userInfos.tags.length <= 4) {\r\n      if (!tags.filter((t) => t === data).length)\r\n        setTags([...tags, data], (data) =>\r\n          setUserInfos({ ...userInfos, tags: data })\r\n        );\r\n      setTag(\"\");\r\n      setOptions(\r\n        originalTags.map((t) => {\r\n          return { value: t };\r\n        })\r\n      );\r\n    }\r\n  };\r\n\r\n  const removeTag = (tag) => {\r\n    if (userInfos.tags.length === 1) {\r\n    }\r\n    // eslint-disable-next-line\r\n    let tagsd = tags.filter((t) => {\r\n      if (t !== tag) return t;\r\n    });\r\n    setTags(tagsd, (data) => setUserInfos({ ...userInfos, tags: data }));\r\n  };\r\n\r\n  const handleUserUpdate = (e) => {\r\n    setUserInfos({\r\n      ...userInfos,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n\r\n  const handleUserDate = (val) => {\r\n    setUserInfos({\r\n      ...userInfos,\r\n      bithday: val,\r\n    });\r\n  };\r\n\r\n  // * Submit data info edited for user\r\n  const SubmitInfo = async () => {\r\n    const token = localStorage.getItem(\"token\");\r\n    const res = await infoUpdate(token, userInfos, dispatch);\r\n    message.loading(\"Loading...\", 2);\r\n    if (res.success) {\r\n      openMessageSuccess(res.message);\r\n    } else {\r\n      openMessageError(res.error);\r\n    }\r\n  };\r\n\r\n  // * Submit location data\r\n  const submitLocation = async () => {\r\n    const token = localStorage.getItem(\"token\");\r\n    const res = await changeLocation(token, userLocation);\r\n    message.loading(\"Loading...\", 2);\r\n    if (res.success) {\r\n      openMessageSuccess(res.message);\r\n    } else {\r\n      openMessageError(res.error);\r\n    }\r\n  };\r\n  // * Submit Profile\r\n  const uploadProfileReq = async ([{ file }]) => {\r\n    const res = await changeProfile(state.token, file);\r\n\r\n    message.loading(\"Loading...\", 2);\r\n    if (res.success) {\r\n      openMessageSuccess(res.message);\r\n    } else {\r\n      openMessageError(res.error);\r\n    }\r\n  };\r\n  // * Submit Gallery\r\n  const uploadGalleryReq = async ({ file }) => {\r\n    const res = await changeGallery(state.token, file);\r\n\r\n    message.loading(\"Loading...\", 2);\r\n    if (res.success) {\r\n      openMessageSuccess(res.message);\r\n      return res.data;\r\n    } else {\r\n      openMessageError(res.error);\r\n      return false;\r\n    }\r\n  };\r\n  // * confirm remove images\r\n  async function confirm(id) {\r\n    const res = await removeGallery(state.token, id);\r\n\r\n    message.loading(\"Loading...\", 2);\r\n    if (res.success) {\r\n      const newArray = userPictures.gallery.filter((obj) => {\r\n        return obj.id !== id;\r\n      });\r\n      setUserPictures({ profile: userPictures.profile, gallery: newArray });\r\n      openMessageSuccess(res.message);\r\n    } else {\r\n      openMessageError(res.error);\r\n    }\r\n  }\r\n  // * Cancel remove images\r\n  function cancel() {\r\n    message.error(\"Click on No\");\r\n  }\r\n\r\n  const galleryUpload = useRef(null);\r\n\r\n  const handleProfileUpload = async (e) => {\r\n    setUserPictures({ ...userPictures, profile: e });\r\n    uploadProfileReq(e);\r\n  };\r\n\r\n  const handleGalleryUpload = async (e) => {\r\n    const res = await uploadGalleryReq(e[e.length - 1]);\r\n    if (res) {\r\n      e[e.length - 1] = res;\r\n      setUserPictures({ ...userPictures, gallery: e });\r\n    }\r\n  };\r\n\r\n  const position = [userLocation.lat, userLocation.lang];\r\n\r\n  const newLocation = (e) => {\r\n    setUserLocation({\r\n      lat: `${e.latLng.lat}`,\r\n      lang: `${e.latLng.lng}`,\r\n      city: e.raw[0].address.city || e.raw[0].address.county,\r\n      country: e.raw[0].address.country,\r\n    });\r\n  };\r\n\r\n  const SearchComponent = () => (\r\n    <Search\r\n      position=\"topleft\"\r\n      provider=\"OpenStreetMap\"\r\n      onChange={newLocation}\r\n    />\r\n  );\r\n  L.Icon.Default.imagePath = \"img/\";\r\n\r\n  let rules = {\r\n    firstname: [\r\n      { max: 30, message: \"The firstname is too long !\" },\r\n      {\r\n        pattern: new RegExp(/^[A-Za-z]{3,}$/),\r\n        message:\r\n          \"The FirstName must be contains letters only at least 3 letters !\",\r\n      },\r\n    ],\r\n    lastname: [\r\n      { max: 30, message: \"The lastname is too long !\" },\r\n      {\r\n        pattern: new RegExp(/^[A-Za-z]{3,}$/),\r\n        message:\r\n          \"The lastname must be contains letters only at least 3 letters !\",\r\n      },\r\n    ],\r\n    username: [\r\n      {\r\n        max: 20,\r\n        min: 3,\r\n        message: \"The username should be between 3 and 20 characters !\",\r\n      },\r\n      {\r\n        pattern: new RegExp(/^[a-zA-Z]+(([-_.]?[a-zA-Z0-9])?)+$/),\r\n        message:\r\n          \"The username must be contains letters or numbers ( -, _ or . ) !\",\r\n      },\r\n    ],\r\n    email: [\r\n      {\r\n        pattern: new RegExp(\r\n          /[a-zA-Z0-9-_.]{1,50}@[a-zA-Z0-9-_.]{1,50}\\.[a-z0-9]{2,10}$/\r\n        ),\r\n        message: \"Invalid email address !\",\r\n      },\r\n    ],\r\n  };\r\n  return (\r\n    <div id=\"general\">\r\n      <ImageUploading\r\n        name=\"profile\"\r\n        value={userPictures.profile}\r\n        onChange={(e) => {\r\n          handleProfileUpload(e);\r\n        }}\r\n        maxNumber={1}\r\n      >\r\n        {({ onImageUpdate, imageList }) => (\r\n          <div className=\"upload__image-wrapper\">\r\n            <div className=\"profileImg\">\r\n              <div style={{ textAlign: \"center\" }}>\r\n                {!imageList.length ? (\r\n                  <Avatar\r\n                    size={200}\r\n                    icon={<UserOutlined />}\r\n                    style={{ width: \"150px\", height: \"150px\" }}\r\n                    onClick={onImageUpdate}\r\n                  />\r\n                ) : (\r\n                  <>\r\n                    <Avatar\r\n                      size={200}\r\n                      src={imageList[0].dataURL}\r\n                      style={{ width: \"150px\", height: \"150px\" }}\r\n                      onClick={onImageUpdate}\r\n                    />\r\n                  </>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </ImageUploading>\r\n      <Divider orientation=\"center\" style={{ margin: \"50px 0px\" }}>\r\n        Informations\r\n      </Divider>\r\n\r\n      <Form initialValues={userInfos} form={form}>\r\n        <Row\r\n          type=\"flex\"\r\n          style={{ justifyContent: \"space-evenly\", marginBottom: 10 }}\r\n        >\r\n          <Col md={11} span={24}>\r\n            <Form.Item name=\"firstname\" rules={rules.firstname}>\r\n              <Input\r\n                prefix={<UserOutlined />}\r\n                name=\"firstname\"\r\n                onChange={(e) => handleUserUpdate(e)}\r\n                placeholder=\"Firstname\"\r\n              ></Input>\r\n            </Form.Item>\r\n          </Col>\r\n          <Col md={11} span={24}>\r\n            <Form.Item name=\"lastname\" rules={rules.lastname}>\r\n              <Input\r\n                prefix={<UserOutlined />}\r\n                name=\"lastname\"\r\n                onChange={(e) => handleUserUpdate(e)}\r\n                placeholder=\"Lastname\"\r\n              ></Input>\r\n            </Form.Item>\r\n          </Col>\r\n        </Row>\r\n        <Row\r\n          type=\"flex\"\r\n          style={{ justifyContent: \"space-evenly\", marginBottom: 10 }}\r\n        >\r\n          <Col md={11} span={24}>\r\n            <Form.Item name=\"username\" rules={rules.username}>\r\n              <Input\r\n                name=\"username\"\r\n                prefix={<UserOutlined />}\r\n                placeholder=\"Username\"\r\n                onChange={(e) => handleUserUpdate(e)}\r\n              />\r\n            </Form.Item>\r\n          </Col>\r\n          <Col md={11} span={24}>\r\n            <Form.Item name=\"email\" rules={rules.email}>\r\n              <Input\r\n                prefix={<MailOutlined />}\r\n                name=\"email\"\r\n                type=\"email\"\r\n                onChange={(e) => handleUserUpdate(e)}\r\n                placeholder=\"Email\"\r\n              ></Input>\r\n            </Form.Item>\r\n          </Col>\r\n        </Row>\r\n        <Row style={{ padding: 20, marginBottom: 10 }}>\r\n          <Col md={11} span={24}>\r\n            <Form.Item name=\"gender\" label=\"Gender\">\r\n              <Radio.Group\r\n                optionType=\"button\"\r\n                name=\"gender\"\r\n                onChange={(e) => handleUserUpdate(e)}\r\n              >\r\n                <Radio.Button value=\"male\">Male</Radio.Button>\r\n                <Radio.Button value=\"female\">Female</Radio.Button>\r\n                <Radio.Button value=\"other\">Other</Radio.Button>\r\n              </Radio.Group>\r\n            </Form.Item>\r\n          </Col>\r\n          <Col md={11} span={24}>\r\n            <Form.Item name=\"looking\" label=\"Interest\">\r\n              <Radio.Group\r\n                optionType=\"button\"\r\n                name=\"looking\"\r\n                onChange={(e) => handleUserUpdate(e)}\r\n              >\r\n                <Radio.Button value=\"male\">Male</Radio.Button>\r\n                <Radio.Button value=\"female\">Female</Radio.Button>\r\n                <Radio.Button value=\"other\">Other</Radio.Button>\r\n              </Radio.Group>\r\n            </Form.Item>\r\n          </Col>\r\n        </Row>\r\n        <Row\r\n          type=\"flex\"\r\n          style={{ marginBottom: 10, justifyContent: \"space-around\" }}\r\n        >\r\n          <Col md={11} span={24}>\r\n            <Form.Item>\r\n              <DatePicker\r\n                placeholder=\"Birthdate\"\r\n                name=\"birthday\"\r\n                format={dateFormat}\r\n                style={{\r\n                  width: \"100%\",\r\n                  height: \"38px\",\r\n                  fontSize: \"1rem\",\r\n                  border: \"none\",\r\n                  borderBottom: \"2px solid #d9d9d9\",\r\n                  color: \"black\",\r\n                }}\r\n                onChange={(value) => {\r\n                  handleUserDate(value);\r\n                }}\r\n              />\r\n            </Form.Item>\r\n          </Col>\r\n          <Col md={11} span={24}>\r\n            <Form.Item label=\"Tags\">\r\n              {userInfos.tags.map((tag, index) => (\r\n                <Tag\r\n                  className=\"tags\"\r\n                  key={tag}\r\n                  style={{\r\n                    marginBottom: \"15px\",\r\n                    fontSize: \"15px\",\r\n                    borderRadius: \"6px\",\r\n                    color: \"white\",\r\n                    padding: \"5px 13px\",\r\n                    boxShadow: \"0px 4px 9px rgb(42 139 242 / 20%)\",\r\n                    background:\r\n                      \"linear-gradient(3deg, #60a9f6 0%, #2a8bf2 100%)\",\r\n                  }}\r\n                  onClose={() => removeTag(tag)}\r\n                  closeIcon={<CloseOutlined />}\r\n                  closable={true}\r\n                >\r\n                  {tag}\r\n                </Tag>\r\n              ))}\r\n              {inputVisible && (\r\n                <AutoComplete\r\n                  options={options}\r\n                  style={{\r\n                    width: \"110px\",\r\n                    marginRight: \"8px\",\r\n                    verticalAlign: \"top\",\r\n                    marginTop: \"2px\",\r\n                    height: \"30px\",\r\n                  }}\r\n                  value={tag}\r\n                  onSelect={onSelect}\r\n                  onSearch={onSearch}\r\n                  placeholder=\"Add tag\"\r\n                />\r\n              )}\r\n              {!inputVisible && (\r\n                <Tag className=\"site-tag-plus\" onClick={handleTagClick}>\r\n                  <PlusOutlined /> New Tag\r\n                </Tag>\r\n              )}\r\n            </Form.Item>\r\n          </Col>\r\n        </Row>\r\n        <Form.Item name=\"bio\">\r\n          <Input.TextArea\r\n            rows={4}\r\n            allowClear\r\n            name=\"bio\"\r\n            showCount\r\n            maxLength={100}\r\n            placeholder=\"Description\"\r\n            onChange={(e) => handleUserUpdate(e)}\r\n          />\r\n        </Form.Item>\r\n        <Form.Item style={{ textAlign: \"center\" }}>\r\n          <Button\r\n            type=\"primary\"\r\n            htmlType=\"submit\"\r\n            onClick={(e) => {\r\n              form.resetFields();\r\n              SubmitInfo();\r\n            }}\r\n            style={{\r\n              fontSize: \"0.6em\",\r\n              marginTop: \"20px\",\r\n              borderRadius: \"8px\",\r\n              padding: \"4px 20px\",\r\n            }}\r\n          >\r\n            Edit Info\r\n          </Button>\r\n        </Form.Item>\r\n      </Form>\r\n      <Form>\r\n        <Divider orientation=\"center\" style={{ margin: \"50px 0px\" }}>\r\n          Pictures\r\n        </Divider>\r\n        <Form.Item id=\"upload-img\">\r\n          <ImageUploading\r\n            multiple\r\n            name=\"gallery\"\r\n            value={userPictures.gallery}\r\n            onChange={handleGalleryUpload}\r\n            maxNumber={4}\r\n          >\r\n            {({ onImageUpload, imageList }) => (\r\n              <div className=\"upload__image-wrapper\">\r\n                <Button\r\n                  ref={galleryUpload}\r\n                  style={{ display: \"none\" }}\r\n                  onClick={onImageUpload}\r\n                />\r\n\r\n                <div className=\"listImage\">\r\n                  {imageList.map((image, key) => (\r\n                    <div className=\"tte\" key={key}>\r\n                      <img\r\n                        src={\r\n                          image.url\r\n                            ? \"http://localhost:3001/api/\" + image.url\r\n                            : image.dataURL\r\n                        }\r\n                        alt=\"...\"\r\n                        style={{\r\n                          width: \"100%\",\r\n                          height: \"100%\",\r\n                          position: \"absolute\",\r\n                        }}\r\n                      />\r\n                      <Popconfirm\r\n                        title=\"Are you sure to delete this image?\"\r\n                        onConfirm={() => confirm(image.id)}\r\n                        onCancel={cancel}\r\n                        okText=\"Yes\"\r\n                        cancelText=\"No\"\r\n                        style={{ fontSize: \"0.8em\" }}\r\n                      >\r\n                        <div className=\"removeImg\">\r\n                          <DeleteOutlined\r\n                            style={{ fontSize: \"30px\", color: \"#fff\" }}\r\n                          />\r\n                        </div>\r\n                      </Popconfirm>\r\n                    </div>\r\n                  ))}\r\n                  {userPictures.gallery.length < 4 ? (\r\n                    <div\r\n                      onClick={() => galleryUpload.current.click()}\r\n                      className=\"uploadNextImage\"\r\n                    >\r\n                      <p>+ Upload Image</p>\r\n                    </div>\r\n                  ) : (\r\n                    \"\"\r\n                  )}\r\n                </div>\r\n              </div>\r\n            )}\r\n          </ImageUploading>\r\n        </Form.Item>\r\n      </Form>\r\n      <Form>\r\n        <Divider orientation=\"center\" style={{ margin: \"50px 0px\" }}>\r\n          Map\r\n        </Divider>\r\n\r\n        <Form.Item>\r\n          <Map\r\n            style={{ height: \"500px\", width: \"100wh\" }}\r\n            center={position}\r\n            zoom={13}\r\n            scrollWheelZoom={false}\r\n          >\r\n            <SearchComponent />\r\n            <TileLayer\r\n              attribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\r\n              url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n            />\r\n            <Marker position={position}>\r\n              <Popup>\r\n                Your are here <br /> We see you.\r\n              </Popup>\r\n            </Marker>\r\n          </Map>\r\n        </Form.Item>\r\n\r\n        <Form.Item style={{ textAlign: \"center\" }}>\r\n          <Button\r\n            type=\"primary\"\r\n            htmlType=\"submit\"\r\n            style={{\r\n              fontSize: \"0.6em\",\r\n              marginTop: \"20px\",\r\n              borderRadius: \"8px\",\r\n              padding: \"4px 20px\",\r\n            }}\r\n            onClick={submitLocation}\r\n          >\r\n            Edit Location\r\n          </Button>\r\n        </Form.Item>\r\n      </Form>\r\n    </div>\r\n  );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}