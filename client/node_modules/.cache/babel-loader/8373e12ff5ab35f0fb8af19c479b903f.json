{"ast":null,"code":"import \"antd/lib/pagination/style\";\nimport _Pagination from \"antd/lib/pagination\";\nimport \"antd/lib/radio/style\";\nimport _Radio from \"antd/lib/radio\";\nimport \"antd/lib/col/style\";\nimport _Col from \"antd/lib/col\";\nimport \"antd/lib/row/style\";\nimport _Row from \"antd/lib/row\";\nimport \"antd/lib/message/style\";\nimport _message from \"antd/lib/message\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\ADMIN\\\\Desktop\\\\Matcha\\\\client\\\\src\\\\pages\\\\Home.js\",\n    _s = $RefreshSig$();\n\nimport Layout from \"../layout/default\";\nimport \"../assets/css/home.less\";\nimport React, { useState, useEffect, useContext } from \"react\";\nimport { Search } from \"../components/Search\";\nimport { Filter } from \"../components/Filter\";\nimport { UserCard } from \"../components/UserCard\";\nimport { BrowsingAction, searchAction } from \"../actions/browsingActions\";\nimport { Context } from \"../Contexts/Context\";\nimport { openMessageError } from \"../helper/Verifications\";\nimport _ from \"lodash\";\nimport Loader from \"react-loader-spinner\";\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Home = () => {\n  _s();\n\n  const {\n    state\n  } = useContext(Context);\n  const [isloading, setIsloading] = useState(true);\n  const [users, setUsers] = useState([]);\n  const [searchedUsers, setSearchedUsers] = useState([]); // eslint-disable-next-line\n\n  const [limit_p, setLimit_p] = useState(12);\n  const [limit, setLimit] = useState(0);\n  const [page, setPage] = useState(1);\n  const [countPage, setCountpage] = useState(0);\n  const [isSearching, setIsSearching] = useState(false);\n  const [search, setSearch] = useState({\n    minage: 18,\n    maxage: 60,\n    minfame: 0,\n    maxfame: 100,\n    location: \"\",\n    tags: []\n  });\n  const [filter, setFilter] = useState({\n    minage: 18,\n    maxage: 60,\n    minfame: 0,\n    maxfame: 100,\n    mind: 0,\n    maxd: 1000,\n    tags: []\n  });\n\n  const setInitialData = async () => {\n    await setLimit(page * limit_p);\n  };\n\n  const loadUsers = async () => {\n    const res = await BrowsingAction(state.token, filter);\n    let matchedUsers = [];\n    let pages;\n\n    if (res.success) {\n      // ! FILTER matched users\n      matchedUsers = res.users; // * => Tags Filter\n\n      if (filter.tags.length !== 0) {\n        matchedUsers = _.filter(matchedUsers, {\n          tags: filter.tags.map(t => {\n            return {\n              name: t.substring(1)\n            };\n          })\n        });\n      }\n\n      setUsers(matchedUsers);\n      pages = Math.round(matchedUsers.length / limit_p);\n      setCountpage(pages ? pages : 1);\n      setIsloading(false);\n    } else {\n      _message.loading(\"Loading...\", 2);\n\n      openMessageError(res.error);\n    }\n  };\n\n  const handlePagination = p => {\n    setPage(p);\n    setLimit(limit_p * p);\n  };\n\n  const handleFilterAge = (min, max) => {\n    setFilter({ ...filter,\n      minage: min,\n      maxage: max\n    });\n  };\n\n  const handleFilterDistance = (mind, maxd) => {\n    setFilter({ ...filter,\n      mind: mind,\n      maxd: maxd\n    });\n  };\n\n  const handleFilterFame = (minfame, maxfame) => {\n    setFilter({ ...filter,\n      minfame: minfame,\n      maxfame: maxfame\n    });\n  };\n\n  const handleFilterTags = tag => {\n    setFilter({ ...filter,\n      tags: tag\n    });\n  }; //* SORT\n\n\n  const sort = field => {\n    // eslint-disable-next-line\n    const choice = field.toLowerCase(); // eslint-disable-next-line\n\n    switch (choice) {\n      case \"age\":\n        isSearching ? setSearchedUsers(_.sortBy(searchedUsers, [choice])) : setUsers(_.sortBy(users, [choice]));\n        break;\n\n      case \"distance\":\n        isSearching ? setSearchedUsers(_.sortBy(searchedUsers, [choice])) : setUsers(_.sortBy(users, [choice]));\n        break;\n\n      case \"fame\":\n        isSearching ? setSearchedUsers(_.orderBy(searchedUsers, [choice], [\"desc\"])) : setUsers(_.orderBy(users, [choice], [\"desc\"]));\n        break;\n\n      case \"tags\":\n        isSearching ? setSearchedUsers(_.orderBy(searchedUsers, [\"commonTags\"], [\"desc\"])) : setUsers(_.orderBy(users, [\"commonTags\"], [\"desc\"]));\n        break;\n    }\n  }; // ! HANDELE SEARCH FIELDS\n  // *  Search By Age\n\n\n  const handleSearchAge = (min, max) => {\n    setSearch({ ...search,\n      minage: min,\n      maxage: max\n    });\n  }; // * Search By fame\n\n\n  const handleSearchFame = (minfame, maxfame) => {\n    setSearch({ ...search,\n      minfame: minfame,\n      maxfame: maxfame\n    });\n  }; // * Search By\n\n\n  const handleSearchLocation = location => {\n    setSearch({ ...search,\n      location: location\n    });\n  };\n\n  const handleSearchTags = tag => {\n    setSearch({ ...search,\n      tags: tag\n    });\n  }; //! Load SEARCH users\n\n\n  const loadSearchUsers = async () => {\n    setIsSearching(true);\n    const res = await searchAction(state.token, search, {});\n    let searchedBylocation = [],\n        searchResult = [];\n    let pages;\n\n    if (res.success) {\n      // ! SEARCH\n      searchResult = res.users; //* => Location Search Use Lodash\n\n      if (search.location) {\n        // eslint-disable-next-line\n        searchedBylocation = searchResult.filter(item => {\n          if (_.startsWith(item.country.toLowerCase(), search.location.trim().toLowerCase()) || _.startsWith(item.city.toLowerCase(), search.location.trim().toLowerCase())) return item;\n        });\n        searchResult = searchedBylocation;\n      } // * => Tags Search\n\n\n      if (search.tags.length !== 0) {\n        searchResult = _.filter(searchResult, {\n          tags: search.tags.map(t => {\n            return {\n              name: t.substring(1)\n            };\n          })\n        });\n      } // ! FILTER Search data\n      // * => Age, fame or distance Filter\n      // eslint-disable-next-line\n\n\n      searchResult = searchResult.filter(item => {\n        if (item.age >= filter.minage && item.age <= filter.maxage || item.fame >= filter.minfame && item.fame <= filter.maxfame || item.distance >= filter.mind && item.distance <= filter.maxd) return item;\n      }); // * => Tags Filter\n\n      if (filter.tags.length !== 0) {\n        searchResult = _.filter(searchResult, {\n          tags: filter.tags.map(t => {\n            return {\n              name: t.substring(1)\n            };\n          })\n        });\n      }\n\n      setSearchedUsers(searchResult); //* => Set count pages\n\n      pages = Math.round(searchResult.length / limit_p);\n      setCountpage(pages ? pages : 1);\n      setIsloading(false);\n    } else {\n      _message.loading(\"Loading...\", 2);\n\n      openMessageError(res.error);\n    }\n  };\n\n  const clearSearch = async () => {\n    await setIsSearching(false);\n    await setSearchedUsers([]);\n    await loadUsers();\n  };\n\n  useEffect(() => {\n    const setData = async () => {\n      await setInitialData();\n      setTimeout(async () => {\n        await loadUsers();\n      }, 3000);\n    };\n\n    setData(); // eslint-disable-next-line\n  }, []);\n  return isloading ? /*#__PURE__*/_jsxDEV(Layout, {\n    children: /*#__PURE__*/_jsxDEV(_Row, {\n      gutter: [16, 16],\n      style: {\n        background: \"white\",\n        padding: \"10px 10px 10px 35px\",\n        borderRadius: \"15px\",\n        height: \"100vh\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignContent: \"center\",\n        marginLeft: \"15px\",\n        marginRight: \"15px\"\n      },\n      children: /*#__PURE__*/_jsxDEV(Loader, {\n        type: \"Hearts\",\n        color: \"#f58080\",\n        height: 200,\n        width: 200,\n        timeout: 3000\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 229,\n    columnNumber: 5\n  }, this) : /*#__PURE__*/_jsxDEV(Layout, {\n    children: [/*#__PURE__*/_jsxDEV(_Row, {\n      type: \"flex\",\n      style: {\n        justifyContent: \"space-around\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(_Col, {\n        span: 11,\n        xs: 22,\n        md: 11,\n        style: {\n          marginBottom: \"20px\"\n        },\n        children: /*#__PURE__*/_jsxDEV(Search, {\n          search: search,\n          handleSearchAge: handleSearchAge,\n          handleSearchLocation: handleSearchLocation,\n          handleSearchFame: handleSearchFame,\n          handleSearchTags: handleSearchTags,\n          loadSearchUsers: loadSearchUsers,\n          clearSearch: clearSearch\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(_Col, {\n        span: 11,\n        xs: 22,\n        md: 11,\n        style: {\n          marginBottom: \"20px\"\n        },\n        children: /*#__PURE__*/_jsxDEV(Filter, {\n          filter: filter,\n          statusSearch: isSearching,\n          handleFilterAge: handleFilterAge,\n          handleFilterDistance: handleFilterDistance,\n          handleFilterFame: handleFilterFame,\n          handleFilterTags: handleFilterTags,\n          loadUsers: loadUsers,\n          loadSearchUsers: loadSearchUsers\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(_Row, {\n      gutter: [16, 16],\n      style: {\n        background: \"white\",\n        padding: \"10px 10px 10px 35px\",\n        borderRadius: \"15px\",\n        marginLeft: \"15px\",\n        marginRight: \"15px\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(_Col, {\n        span: 24,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            float: \"right\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            style: {\n              display: \"inline-block\",\n              marginRight: \"20px\"\n            },\n            children: \"Sort by:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 292,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(_Radio.Group, {\n            optionType: \"button\",\n            buttonStyle: \"solid\",\n            onChange: e => {\n              sort(e.target.value);\n            },\n            children: [/*#__PURE__*/_jsxDEV(_Radio.Button, {\n              value: \"age\",\n              children: \"Age\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 302,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(_Radio.Button, {\n              value: \"distance\",\n              children: \"Distance\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 303,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(_Radio.Button, {\n              value: \"fame\",\n              children: \"Fame\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 304,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(_Radio.Button, {\n              value: \"tags\",\n              children: \"Common tags\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 305,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 295,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 9\n      }, this), isSearching ? searchedUsers.slice(limit - limit_p, limit).map(user => /*#__PURE__*/_jsxDEV(_Col, {\n        xxl: 4,\n        xs: 24,\n        sm: 12,\n        lg: 6,\n        span: 6,\n        children: /*#__PURE__*/_jsxDEV(UserCard, {\n          data: user\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 15\n        }, this)\n      }, user.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 311,\n        columnNumber: 13\n      }, this)) : users.slice(limit - limit_p, limit).map(user => /*#__PURE__*/_jsxDEV(_Col, {\n        xxl: 4,\n        xs: 24,\n        sm: 12,\n        lg: 6,\n        span: 6,\n        children: /*#__PURE__*/_jsxDEV(UserCard, {\n          data: user\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 15\n        }, this)\n      }, user.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 13\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(_Row, {\n      type: \"flex\",\n      style: {\n        justifyContent: \"space-around\",\n        margin: \"20px\"\n      },\n      children: /*#__PURE__*/_jsxDEV(_Pagination, {\n        hideOnSinglePage: true,\n        defaultCurrent: page,\n        showSizeChanger: false,\n        total: countPage * 10,\n        onChange: page => {\n          handlePagination(page);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 321,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 254,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Home, \"oOrFVqBU0h9smdHCtE0RliCerVM=\");\n\n_c = Home;\nexport default Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"sources":["C:/Users/ADMIN/Desktop/Matcha/client/src/pages/Home.js"],"names":["Layout","React","useState","useEffect","useContext","Search","Filter","UserCard","BrowsingAction","searchAction","Context","openMessageError","_","Loader","Home","state","isloading","setIsloading","users","setUsers","searchedUsers","setSearchedUsers","limit_p","setLimit_p","limit","setLimit","page","setPage","countPage","setCountpage","isSearching","setIsSearching","search","setSearch","minage","maxage","minfame","maxfame","location","tags","filter","setFilter","mind","maxd","setInitialData","loadUsers","res","token","matchedUsers","pages","success","length","map","t","name","substring","Math","round","loading","error","handlePagination","p","handleFilterAge","min","max","handleFilterDistance","handleFilterFame","handleFilterTags","tag","sort","field","choice","toLowerCase","sortBy","orderBy","handleSearchAge","handleSearchFame","handleSearchLocation","handleSearchTags","loadSearchUsers","searchedBylocation","searchResult","item","startsWith","country","trim","city","age","fame","distance","clearSearch","setData","setTimeout","background","padding","borderRadius","height","display","justifyContent","alignContent","marginLeft","marginRight","marginBottom","float","e","target","value","slice","user","id","margin"],"mappings":"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","sourcesContent":["import Layout from \"../layout/default\";\r\nimport \"../assets/css/home.less\";\r\nimport { Row, Col, Radio, message, Pagination } from \"antd\";\r\nimport React, { useState, useEffect, useContext } from \"react\";\r\nimport { Search } from \"../components/Search\";\r\nimport { Filter } from \"../components/Filter\";\r\nimport { UserCard } from \"../components/UserCard\";\r\nimport { BrowsingAction, searchAction } from \"../actions/browsingActions\";\r\nimport { Context } from \"../Contexts/Context\";\r\nimport { openMessageError } from \"../helper/Verifications\";\r\nimport _ from \"lodash\";\r\nimport Loader from \"react-loader-spinner\";\r\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\r\n\r\nconst Home = () => {\r\n  const { state } = useContext(Context);\r\n\r\n  const [isloading, setIsloading] = useState(true);\r\n  const [users, setUsers] = useState([]);\r\n  const [searchedUsers, setSearchedUsers] = useState([]);\r\n  // eslint-disable-next-line\r\n  const [limit_p, setLimit_p] = useState(12);\r\n  const [limit, setLimit] = useState(0);\r\n  const [page, setPage] = useState(1);\r\n  const [countPage, setCountpage] = useState(0);\r\n  const [isSearching, setIsSearching] = useState(false);\r\n\r\n  const [search, setSearch] = useState({\r\n    minage: 18,\r\n    maxage: 60,\r\n    minfame: 0,\r\n    maxfame: 100,\r\n    location: \"\",\r\n    tags: [],\r\n  });\r\n  const [filter, setFilter] = useState({\r\n    minage: 18,\r\n    maxage: 60,\r\n    minfame: 0,\r\n    maxfame: 100,\r\n    mind: 0,\r\n    maxd: 1000,\r\n    tags: [],\r\n  });\r\n\r\n  const setInitialData = async () => {\r\n    await setLimit(page * limit_p);\r\n  };\r\n\r\n  const loadUsers = async () => {\r\n    const res = await BrowsingAction(state.token, filter);\r\n    let matchedUsers = [];\r\n    let pages;\r\n\r\n    if (res.success) {\r\n      // ! FILTER matched users\r\n      matchedUsers = res.users;\r\n      // * => Tags Filter\r\n      if (filter.tags.length !== 0) {\r\n        matchedUsers = _.filter(matchedUsers, {\r\n          tags: filter.tags.map((t) => {\r\n            return { name: t.substring(1) };\r\n          }),\r\n        });\r\n      }\r\n      setUsers(matchedUsers);\r\n      pages = Math.round(matchedUsers.length / limit_p);\r\n      setCountpage(pages ? pages : 1);\r\n      setIsloading(false);\r\n    } else {\r\n      message.loading(\"Loading...\", 2);\r\n      openMessageError(res.error);\r\n    }\r\n  };\r\n\r\n  const handlePagination = (p) => {\r\n    setPage(p);\r\n    setLimit(limit_p * p);\r\n  };\r\n\r\n  const handleFilterAge = (min, max) => {\r\n    setFilter({ ...filter, minage: min, maxage: max });\r\n  };\r\n\r\n  const handleFilterDistance = (mind, maxd) => {\r\n    setFilter({ ...filter, mind: mind, maxd: maxd });\r\n  };\r\n\r\n  const handleFilterFame = (minfame, maxfame) => {\r\n    setFilter({ ...filter, minfame: minfame, maxfame: maxfame });\r\n  };\r\n\r\n  const handleFilterTags = (tag) => {\r\n    setFilter({ ...filter, tags: tag });\r\n  };\r\n\r\n  //* SORT\r\n  const sort = (field) => {\r\n    // eslint-disable-next-line\r\n    const choice = field.toLowerCase();\r\n    // eslint-disable-next-line\r\n    switch (choice) {\r\n      case \"age\":\r\n        isSearching\r\n          ? setSearchedUsers(_.sortBy(searchedUsers, [choice]))\r\n          : setUsers(_.sortBy(users, [choice]));\r\n        break;\r\n      case \"distance\":\r\n        isSearching\r\n          ? setSearchedUsers(_.sortBy(searchedUsers, [choice]))\r\n          : setUsers(_.sortBy(users, [choice]));\r\n        break;\r\n      case \"fame\":\r\n        isSearching\r\n          ? setSearchedUsers(_.orderBy(searchedUsers, [choice], [\"desc\"]))\r\n          : setUsers(_.orderBy(users, [choice], [\"desc\"]));\r\n        break;\r\n      case \"tags\":\r\n        isSearching\r\n          ? setSearchedUsers(_.orderBy(searchedUsers, [\"commonTags\"], [\"desc\"]))\r\n          : setUsers(_.orderBy(users, [\"commonTags\"], [\"desc\"]));\r\n        break;\r\n    }\r\n  };\r\n\r\n  // ! HANDELE SEARCH FIELDS\r\n  // *  Search By Age\r\n  const handleSearchAge = (min, max) => {\r\n    setSearch({ ...search, minage: min, maxage: max });\r\n  };\r\n\r\n  // * Search By fame\r\n  const handleSearchFame = (minfame, maxfame) => {\r\n    setSearch({ ...search, minfame: minfame, maxfame: maxfame });\r\n  };\r\n  // * Search By\r\n  const handleSearchLocation = (location) => {\r\n    setSearch({ ...search, location: location });\r\n  };\r\n\r\n  const handleSearchTags = (tag) => {\r\n    setSearch({ ...search, tags: tag });\r\n  };\r\n  //! Load SEARCH users\r\n  const loadSearchUsers = async () => {\r\n    setIsSearching(true);\r\n    const res = await searchAction(state.token, search, {});\r\n    let searchedBylocation = [],\r\n      searchResult = [];\r\n    let pages;\r\n\r\n    if (res.success) {\r\n      // ! SEARCH\r\n      searchResult = res.users;\r\n      //* => Location Search Use Lodash\r\n      if (search.location) {\r\n        // eslint-disable-next-line\r\n        searchedBylocation = searchResult.filter((item) => {\r\n          if (\r\n            _.startsWith(\r\n              item.country.toLowerCase(),\r\n              search.location.trim().toLowerCase()\r\n            ) ||\r\n            _.startsWith(\r\n              item.city.toLowerCase(),\r\n              search.location.trim().toLowerCase()\r\n            )\r\n          )\r\n            return item;\r\n        });\r\n        searchResult = searchedBylocation;\r\n      }\r\n      // * => Tags Search\r\n      if (search.tags.length !== 0) {\r\n        searchResult = _.filter(searchResult, {\r\n          tags: search.tags.map((t) => {\r\n            return { name: t.substring(1) };\r\n          }),\r\n        });\r\n      }\r\n      // ! FILTER Search data\r\n      // * => Age, fame or distance Filter\r\n      // eslint-disable-next-line\r\n      searchResult = searchResult.filter((item) => {\r\n        if (\r\n          (item.age >= filter.minage && item.age <= filter.maxage) ||\r\n          (item.fame >= filter.minfame && item.fame <= filter.maxfame) ||\r\n          (item.distance >= filter.mind && item.distance <= filter.maxd)\r\n        )\r\n          return item;\r\n      });\r\n      // * => Tags Filter\r\n      if (filter.tags.length !== 0) {\r\n        searchResult = _.filter(searchResult, {\r\n          tags: filter.tags.map((t) => {\r\n            return { name: t.substring(1) };\r\n          }),\r\n        });\r\n      }\r\n      setSearchedUsers(searchResult);\r\n      //* => Set count pages\r\n      pages = Math.round(searchResult.length / limit_p);\r\n      setCountpage(pages ? pages : 1);\r\n      setIsloading(false);\r\n    } else {\r\n      message.loading(\"Loading...\", 2);\r\n      openMessageError(res.error);\r\n    }\r\n  };\r\n\r\n  const clearSearch = async () => {\r\n    await setIsSearching(false);\r\n    await setSearchedUsers([]);\r\n    await loadUsers();\r\n  };\r\n\r\n  useEffect(() => {\r\n    const setData = async () => {\r\n      await setInitialData();\r\n      setTimeout(async () => {\r\n        await loadUsers();\r\n      }, 3000);\r\n    };\r\n    setData();\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  return isloading ? (\r\n    <Layout>\r\n      <Row\r\n        gutter={[16, 16]}\r\n        style={{\r\n          background: \"white\",\r\n          padding: \"10px 10px 10px 35px\",\r\n          borderRadius: \"15px\",\r\n          height: \"100vh\",\r\n          display: \"flex\",\r\n          justifyContent: \"center\",\r\n          alignContent: \"center\",\r\n          marginLeft: \"15px\",\r\n          marginRight: \"15px\",\r\n        }}\r\n      >\r\n        <Loader\r\n          type=\"Hearts\"\r\n          color=\"#f58080\"\r\n          height={200}\r\n          width={200}\r\n          timeout={3000}\r\n        />\r\n      </Row>\r\n    </Layout>\r\n  ) : (\r\n    <Layout>\r\n      <Row type=\"flex\" style={{ justifyContent: \"space-around\" }}>\r\n        <Col span={11} xs={22} md={11} style={{ marginBottom: \"20px\" }}>\r\n          <Search\r\n            search={search}\r\n            handleSearchAge={handleSearchAge}\r\n            handleSearchLocation={handleSearchLocation}\r\n            handleSearchFame={handleSearchFame}\r\n            handleSearchTags={handleSearchTags}\r\n            loadSearchUsers={loadSearchUsers}\r\n            clearSearch={clearSearch}\r\n          />\r\n        </Col>\r\n        <Col span={11} xs={22} md={11} style={{ marginBottom: \"20px\" }}>\r\n          <Filter\r\n            filter={filter}\r\n            statusSearch={isSearching}\r\n            handleFilterAge={handleFilterAge}\r\n            handleFilterDistance={handleFilterDistance}\r\n            handleFilterFame={handleFilterFame}\r\n            handleFilterTags={handleFilterTags}\r\n            loadUsers={loadUsers}\r\n            loadSearchUsers={loadSearchUsers}\r\n          />\r\n        </Col>\r\n      </Row>\r\n      <Row\r\n        gutter={[16, 16]}\r\n        style={{\r\n          background: \"white\",\r\n          padding: \"10px 10px 10px 35px\",\r\n          borderRadius: \"15px\",\r\n          marginLeft: \"15px\",\r\n          marginRight: \"15px\",\r\n        }}\r\n      >\r\n        <Col span={24}>\r\n          <div style={{ float: \"right\" }}>\r\n            <h4 style={{ display: \"inline-block\", marginRight: \"20px\" }}>\r\n              Sort by:\r\n            </h4>\r\n            <Radio.Group\r\n              optionType=\"button\"\r\n              buttonStyle=\"solid\"\r\n              onChange={(e) => {\r\n                sort(e.target.value);\r\n              }}\r\n            >\r\n              <Radio.Button value=\"age\">Age</Radio.Button>\r\n              <Radio.Button value=\"distance\">Distance</Radio.Button>\r\n              <Radio.Button value=\"fame\">Fame</Radio.Button>\r\n              <Radio.Button value=\"tags\">Common tags</Radio.Button>\r\n            </Radio.Group>\r\n          </div>\r\n        </Col>\r\n        {isSearching\r\n          ? searchedUsers.slice(limit - limit_p, limit).map((user) => (\r\n            <Col key={user.id} xxl={4} xs={24} sm={12} lg={6} span={6}>\r\n              <UserCard data={user} />\r\n            </Col>\r\n          ))\r\n          : users.slice(limit - limit_p, limit).map((user) => (\r\n            <Col key={user.id} xxl={4} xs={24} sm={12} lg={6} span={6}>\r\n              <UserCard data={user} />\r\n            </Col>\r\n          ))}\r\n      </Row>\r\n      <Row\r\n        type=\"flex\"\r\n        style={{ justifyContent: \"space-around\", margin: \"20px\" }}\r\n      >\r\n        <Pagination\r\n          hideOnSinglePage\r\n          defaultCurrent={page}\r\n          showSizeChanger={false}\r\n          total={countPage * 10}\r\n          onChange={(page) => {\r\n            handlePagination(page);\r\n          }}\r\n        />\r\n      </Row>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n"]},"metadata":{},"sourceType":"module"}