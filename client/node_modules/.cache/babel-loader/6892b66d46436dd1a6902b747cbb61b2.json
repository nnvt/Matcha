{"ast":null,"code":"import \"antd/lib/drawer/style\";\nimport _Drawer from \"antd/lib/drawer\";\nimport \"antd/lib/list/style\";\nimport _List from \"antd/lib/list\";\nimport \"antd/lib/avatar/style\";\nimport _Avatar from \"antd/lib/avatar\";\nimport \"antd/lib/row/style\";\nimport _Row from \"antd/lib/row\";\nimport \"antd/lib/col/style\";\nimport _Col from \"antd/lib/col\";\nimport \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nimport \"antd/lib/badge/style\";\nimport _Badge from \"antd/lib/badge\";\nimport \"antd/lib/menu/style\";\nimport _Menu from \"antd/lib/menu\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\ADMIN\\\\Desktop\\\\Matcha\\\\client\\\\src\\\\components\\\\sideBar.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useContext, useEffect } from \"react\";\nimport { useLocation, Link, useHistory } from \"react-router-dom\";\nimport { Context } from \"../Contexts/Context\"; //icons\n\nimport { HomeOutlined, MessageOutlined, UserOutlined, BellOutlined, SettingOutlined, PoweroffOutlined, DeleteTwoTone } from \"@ant-design/icons\"; //css\n\nimport \"../assets/css/sidebar.less\";\nimport { openMessageError } from \"../helper/Verifications\"; //actions\n\nimport { logoutAction } from \"../actions/userAction\";\nimport { notifyAction, setNotifSeen, setAllNotifSeen, deleteNotif, deleteAllNotif } from \"../actions/notifyActions\";\nimport moment from \"moment\";\nimport { socketConn as socket } from \"../sockets\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst SideBar = () => {\n  _s();\n\n  const {\n    state,\n    dispatch\n  } = useContext(Context);\n  const location = useLocation();\n  let history = useHistory();\n  const [itemClicked, setItemClicked] = useState(0);\n  const [showDrawer, setshowDrawer] = useState(false); // eslint-disable-next-line\n\n  const [Notifs, setNotifs] = useState([]);\n  const [countUnread, setCount] = useState(0);\n  useEffect(() => {\n    const getNotifs = async () => {\n      try {\n        const res = await notifyAction(state.token);\n\n        if (res.success) {\n          setNotifs(res.data);\n          setCount(res.countUnread);\n        } else {\n          openMessageError(res.error);\n        }\n      } catch (e) {\n        openMessageError(\"Something is wrong!\");\n      }\n    };\n\n    getNotifs(); // No need to include `Notifs` as a dependency here to prevent the loop\n  }, []); // Keep the dependency array empty\n\n  useEffect(() => {\n    socket.on(\"notifications\", data => {\n      setNotifs(data.data);\n      setCount(data.countUnread);\n    });\n  }, [Notifs, countUnread]);\n\n  const handleClickNotif = (id, username) => {\n    // SET NOTIF has been seen\n    setNotifSeen(state.token, id);\n    history.push(\"/profile/\" + username);\n  };\n\n  const handleDeleteNotif = id => {\n    Notifs.filter(item => item.id === id);\n    deleteNotif(state.token, id);\n  };\n\n  const handleReadAllNotif = () => {\n    setAllNotifSeen(state.token);\n  };\n\n  const handleDeleteAllNotif = () => {\n    deleteAllNotif(state.token);\n  };\n\n  const Logout = async () => {\n    await logoutAction(state.id, dispatch);\n  };\n\n  const handleMenuClick = key => {\n    setItemClicked(key);\n    if (key === 4) setshowDrawer(true);else history.push([\"\", \"/home\", \"/chat\", \"/profile\", \"\", \"/settings\"][key]);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(_Menu, {\n      style: {\n        background: \"#f5f1f1\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"sidebar-active\",\n        style: {\n          display: location.pathname === \"/home\" && showDrawer === false ? \"block\" : \"none\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(_Menu.Item, {\n        icon: /*#__PURE__*/_jsxDEV(HomeOutlined, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 17\n        }, this),\n        onClick: () => handleMenuClick(1),\n        children: \"HOME\"\n      }, \"1\", false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"sidebar-active\",\n        style: {\n          display: location.pathname === \"/chat\" && showDrawer === false ? \"block\" : \"none\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(_Menu.Item, {\n        icon: /*#__PURE__*/_jsxDEV(MessageOutlined, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 17\n        }, this),\n        onClick: () => handleMenuClick(2),\n        children: [\"CHAT\", /*#__PURE__*/_jsxDEV(_Badge, {\n          className: \"badge\" // count={1000}\n          // overflowCount={999}\n          ,\n          offset: [88, -5]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 11\n        }, this)]\n      }, \"2\", true, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"sidebar-active\",\n        style: {\n          display: location.pathname === \"/profile\" && showDrawer === false ? \"block\" : \"none\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(_Menu.Item, {\n        icon: /*#__PURE__*/_jsxDEV(UserOutlined, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 17\n        }, this),\n        onClick: () => handleMenuClick(3),\n        children: \"PROFILE\"\n      }, \"3\", false, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"\",\n        style: {\n          display: itemClicked === 4 && showDrawer === true ? \"block\" : \"none\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(_Menu.Item, {\n        icon:\n        /*#__PURE__*/\n        // <Badge dot offset={[-13, 4]}>\n        _jsxDEV(BellOutlined, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 13\n        }, this)\n        /* </Badge> */\n        ,\n        onClick: () => handleMenuClick(4),\n        children: [\"NOTIFICATION\", /*#__PURE__*/_jsxDEV(_Badge, {\n          className: \"badge\",\n          count: countUnread,\n          offset: [20, -5]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 11\n        }, this)]\n      }, \"4\", true, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"sidebar-active\",\n        style: {\n          display: location.pathname === \"/settings\" && showDrawer === false ? \"block\" : \"none\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(_Menu.Item, {\n        icon: /*#__PURE__*/_jsxDEV(SettingOutlined, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 17\n        }, this),\n        onClick: () => handleMenuClick(5),\n        children: \"SETTINGS\"\n      }, \"5\", false, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(_Menu.Item, {\n        id: \"logout-menu\",\n        icon: /*#__PURE__*/_jsxDEV(PoweroffOutlined, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 17\n        }, this),\n        onClick: Logout,\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/\",\n          type: \"text\",\n          style: {\n            fontSize: \"1rem\"\n          },\n          children: \"LOGOUT\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(_Drawer, {\n      title: \"NOTIFICATION\",\n      placement: \"left\",\n      onClose: () => setshowDrawer(false),\n      visible: showDrawer,\n      children: [/*#__PURE__*/_jsxDEV(_Row, {\n        children: [/*#__PURE__*/_jsxDEV(_Col, {\n          span: 12,\n          children: /*#__PURE__*/_jsxDEV(_Button, {\n            style: {\n              fontSize: \"0.6em\",\n              boxShadow: \"0px 4px 9px rgb(42 139 242 / 20%)\",\n              marginLeft: \"5px\",\n              width: \"153px\",\n              height: \"50px\"\n            },\n            onClick: () => handleReadAllNotif(),\n            children: \"See All\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(_Col, {\n          span: 12,\n          children: /*#__PURE__*/_jsxDEV(_Button, {\n            style: {\n              fontSize: \"0.6em\",\n              boxShadow: \"0px 4px 9px rgb(42 139 242 / 20%)\",\n              width: \"153px\",\n              height: \"50px\"\n            },\n            onClick: () => handleDeleteAllNotif(),\n            children: \"Delete All\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(_List, {\n        dataSource: Notifs,\n        renderItem: item => /*#__PURE__*/_jsxDEV(_Row, {\n          style: {\n            boxShadow: \"0px 4px 9px rgb(42 139 242 / 20%)\",\n            marginTop: \"10px\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(_Col, {\n            span: 20,\n            children: /*#__PURE__*/_jsxDEV(_List.Item, {\n              style: item.seen ? {\n                backgroundColor: \"white\",\n                cursor: \"pointer\",\n                padding: \"10px\"\n              } : {\n                backgroundColor: \"#fff1f0\",\n                cursor: \"pointer\",\n                padding: \"10px\"\n              },\n              onClick: () => {\n                handleClickNotif(item.id, item.username);\n              },\n              children: [/*#__PURE__*/_jsxDEV(_List.Item.Meta, {\n                avatar: /*#__PURE__*/_jsxDEV(_Avatar, {\n                  src: \"http://localhost:3001/api/\" + item.profile\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 252,\n                  columnNumber: 23\n                }, this),\n                title:\n                /*#__PURE__*/\n                // eslint-disable-next-line\n                _jsxDEV(\"span\", {\n                  children: [item.firstname, \" \", item.lastname]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 258,\n                  columnNumber: 23\n                }, this),\n                description: item.content\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 250,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  fontSize: \"10px\",\n                  color: \"gray\"\n                },\n                children: moment(item.createdAt).from(Date.now())\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 264,\n                columnNumber: 19\n              }, this)]\n            }, item.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(_Col, {\n            span: 4,\n            style: {\n              display: \"flex\",\n              justifyContent: \"center\",\n              alignItems: \"center\"\n            },\n            children: /*#__PURE__*/_jsxDEV(DeleteTwoTone, {\n              twoToneColor: \"red\",\n              style: {\n                fontSize: \"1rem\",\n                marginRight: \"10px\"\n              },\n              onClick: () => {\n                handleDeleteNotif(item.id);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 280,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 273,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 97,\n    columnNumber: 5\n  }, this);\n};\n\n_s(SideBar, \"xzmmVaDloE3YFEgAE2IvpEdPyos=\", false, function () {\n  return [useLocation, useHistory];\n});\n\n_c = SideBar;\nexport default SideBar;\n\nvar _c;\n\n$RefreshReg$(_c, \"SideBar\");","map":{"version":3,"sources":["C:/Users/ADMIN/Desktop/Matcha/client/src/components/sideBar.js"],"names":["useState","useContext","useEffect","useLocation","Link","useHistory","Context","HomeOutlined","MessageOutlined","UserOutlined","BellOutlined","SettingOutlined","PoweroffOutlined","DeleteTwoTone","openMessageError","logoutAction","notifyAction","setNotifSeen","setAllNotifSeen","deleteNotif","deleteAllNotif","moment","socketConn","socket","SideBar","state","dispatch","location","history","itemClicked","setItemClicked","showDrawer","setshowDrawer","Notifs","setNotifs","countUnread","setCount","getNotifs","res","token","success","data","error","e","on","handleClickNotif","id","username","push","handleDeleteNotif","filter","item","handleReadAllNotif","handleDeleteAllNotif","Logout","handleMenuClick","key","background","display","pathname","fontSize","boxShadow","marginLeft","width","height","marginTop","seen","backgroundColor","cursor","padding","profile","firstname","lastname","content","color","createdAt","from","Date","now","justifyContent","alignItems","marginRight"],"mappings":"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","sourcesContent":["import { useState, useContext, useEffect } from \"react\";\r\n\r\nimport { Menu, Avatar, Drawer, Badge, List, Row, Col, Button } from \"antd\";\r\nimport { useLocation, Link, useHistory } from \"react-router-dom\";\r\nimport { Context } from \"../Contexts/Context\";\r\n//icons\r\nimport {\r\n  HomeOutlined,\r\n  MessageOutlined,\r\n  UserOutlined,\r\n  BellOutlined,\r\n  SettingOutlined,\r\n  PoweroffOutlined,\r\n  DeleteTwoTone,\r\n} from \"@ant-design/icons\";\r\n\r\n//css\r\nimport \"../assets/css/sidebar.less\";\r\nimport { openMessageError } from \"../helper/Verifications\";\r\n\r\n//actions\r\nimport { logoutAction } from \"../actions/userAction\";\r\nimport {\r\n  notifyAction,\r\n  setNotifSeen,\r\n  setAllNotifSeen,\r\n  deleteNotif,\r\n  deleteAllNotif,\r\n} from \"../actions/notifyActions\";\r\nimport moment from \"moment\";\r\nimport { socketConn as socket } from \"../sockets\";\r\n\r\nconst SideBar = () => {\r\n  const { state, dispatch } = useContext(Context);\r\n  const location = useLocation();\r\n  let history = useHistory();\r\n  const [itemClicked, setItemClicked] = useState(0);\r\n  const [showDrawer, setshowDrawer] = useState(false);\r\n  // eslint-disable-next-line\r\n  const [Notifs, setNotifs] = useState([]);\r\n  const [countUnread, setCount] = useState(0);\r\n\r\n  useEffect(() => {\r\n    const getNotifs = async () => {\r\n      try {\r\n        const res = await notifyAction(state.token);\r\n        if (res.success) {\r\n          setNotifs(res.data);\r\n          setCount(res.countUnread);\r\n        } else {\r\n          openMessageError(res.error);\r\n        }\r\n      } catch (e) {\r\n        openMessageError(\"Something is wrong!\");\r\n      }\r\n    };\r\n\r\n    getNotifs();\r\n    // No need to include `Notifs` as a dependency here to prevent the loop\r\n  }, []); // Keep the dependency array empty\r\n\r\n\r\n  useEffect(() => {\r\n    socket.on(\"notifications\", (data) => {\r\n      setNotifs(data.data);\r\n      setCount(data.countUnread);\r\n    });\r\n  }, [Notifs, countUnread]);\r\n\r\n  const handleClickNotif = (id, username) => {\r\n    // SET NOTIF has been seen\r\n    setNotifSeen(state.token, id);\r\n    history.push(\"/profile/\" + username);\r\n  };\r\n  const handleDeleteNotif = (id) => {\r\n    Notifs.filter((item) => item.id === id);\r\n    deleteNotif(state.token, id);\r\n  };\r\n  const handleReadAllNotif = () => {\r\n    setAllNotifSeen(state.token);\r\n  };\r\n\r\n  const handleDeleteAllNotif = () => {\r\n    deleteAllNotif(state.token);\r\n  };\r\n\r\n  const Logout = async () => {\r\n    await logoutAction(state.id, dispatch);\r\n  };\r\n  const handleMenuClick = (key) => {\r\n    setItemClicked(key);\r\n    if (key === 4) setshowDrawer(true);\r\n    else history.push([\"\", \"/home\", \"/chat\", \"/profile\", \"\", \"/settings\"][key]);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Menu style={{ background: \"#f5f1f1\" }}>\r\n        <div\r\n          id=\"sidebar-active\"\r\n          style={{\r\n            display:\r\n              location.pathname === \"/home\" && showDrawer === false\r\n                ? \"block\"\r\n                : \"none\",\r\n          }}></div>\r\n        <Menu.Item\r\n          key=\"1\"\r\n          icon={<HomeOutlined />}\r\n          onClick={() => handleMenuClick(1)}>\r\n          HOME\r\n        </Menu.Item>\r\n        <div\r\n          id=\"sidebar-active\"\r\n          style={{\r\n            display:\r\n              location.pathname === \"/chat\" && showDrawer === false\r\n                ? \"block\"\r\n                : \"none\",\r\n          }}></div>\r\n        <Menu.Item\r\n          key=\"2\"\r\n          icon={<MessageOutlined />}\r\n          onClick={() => handleMenuClick(2)}>\r\n          CHAT\r\n          <Badge\r\n            className=\"badge\"\r\n            // count={1000}\r\n            // overflowCount={999}\r\n            offset={[88, -5]}></Badge>\r\n        </Menu.Item>\r\n        <div\r\n          id=\"sidebar-active\"\r\n          style={{\r\n            display:\r\n              location.pathname === \"/profile\" && showDrawer === false\r\n                ? \"block\"\r\n                : \"none\",\r\n          }}></div>\r\n        <Menu.Item\r\n          key=\"3\"\r\n          icon={<UserOutlined />}\r\n          onClick={() => handleMenuClick(3)}>\r\n          PROFILE\r\n        </Menu.Item>\r\n        <div\r\n          id=\"\"\r\n          style={{\r\n            display:\r\n              itemClicked === 4 && showDrawer === true ? \"block\" : \"none\",\r\n          }}></div>\r\n        <Menu.Item\r\n          key=\"4\"\r\n          icon={\r\n            // <Badge dot offset={[-13, 4]}>\r\n            <BellOutlined />\r\n            /* </Badge> */\r\n          }\r\n          onClick={() => handleMenuClick(4)}>\r\n          NOTIFICATION\r\n          <Badge\r\n            className=\"badge\"\r\n            count={countUnread}\r\n            offset={[20, -5]}></Badge>\r\n        </Menu.Item>\r\n        <div\r\n          id=\"sidebar-active\"\r\n          style={{\r\n            display:\r\n              location.pathname === \"/settings\" && showDrawer === false\r\n                ? \"block\"\r\n                : \"none\",\r\n          }}></div>\r\n        <Menu.Item\r\n          key=\"5\"\r\n          icon={<SettingOutlined />}\r\n          onClick={() => handleMenuClick(5)}>\r\n          SETTINGS\r\n        </Menu.Item>\r\n\r\n        <Menu.Item\r\n          id=\"logout-menu\"\r\n          icon={<PoweroffOutlined />}\r\n          onClick={Logout}>\r\n          <Link to=\"/\" type=\"text\" style={{ fontSize: \"1rem\" }}>\r\n            LOGOUT\r\n          </Link>\r\n        </Menu.Item>\r\n      </Menu>\r\n      <Drawer\r\n        title=\"NOTIFICATION\"\r\n        placement=\"left\"\r\n        onClose={() => setshowDrawer(false)}\r\n        visible={showDrawer}>\r\n        <Row>\r\n          <Col span={12}>\r\n            <Button\r\n              style={{\r\n                fontSize: \"0.6em\",\r\n                boxShadow: \"0px 4px 9px rgb(42 139 242 / 20%)\",\r\n                marginLeft: \"5px\",\r\n                width: \"153px\",\r\n                height: \"50px\",\r\n              }}\r\n              onClick={() => handleReadAllNotif()}>\r\n              See All\r\n            </Button>\r\n          </Col>\r\n          <Col span={12}>\r\n            <Button\r\n              style={{\r\n                fontSize: \"0.6em\",\r\n                boxShadow: \"0px 4px 9px rgb(42 139 242 / 20%)\",\r\n                width: \"153px\",\r\n                height: \"50px\",\r\n              }}\r\n              onClick={() => handleDeleteAllNotif()}>\r\n              Delete All\r\n            </Button>\r\n          </Col>\r\n        </Row>\r\n\r\n        <List\r\n          dataSource={Notifs}\r\n          renderItem={(item) => (\r\n            <Row\r\n              style={{\r\n                boxShadow: \"0px 4px 9px rgb(42 139 242 / 20%)\",\r\n                marginTop: \"10px\",\r\n              }}>\r\n              <Col span={20}>\r\n                <List.Item\r\n                  key={item.id}\r\n                  style={\r\n                    item.seen\r\n                      ? {\r\n                        backgroundColor: \"white\",\r\n                        cursor: \"pointer\",\r\n                        padding: \"10px\",\r\n                      }\r\n                      : {\r\n                        backgroundColor: \"#fff1f0\",\r\n                        cursor: \"pointer\",\r\n                        padding: \"10px\",\r\n                      }\r\n                  }\r\n                  onClick={() => {\r\n                    handleClickNotif(item.id, item.username);\r\n                  }}>\r\n                  <List.Item.Meta\r\n                    avatar={\r\n                      <Avatar\r\n                        src={\"http://localhost:3001/api/\" + item.profile}\r\n                      />\r\n                    }\r\n                    title={\r\n                      // eslint-disable-next-line\r\n                      <span>\r\n                        {item.firstname} {item.lastname}\r\n                      </span>\r\n                    }\r\n                    description={item.content}\r\n                  />\r\n                  <span\r\n                    style={{\r\n                      fontSize: \"10px\",\r\n                      color: \"gray\",\r\n                    }}>\r\n                    {moment(item.createdAt).from(Date.now())}\r\n                  </span>\r\n                </List.Item>\r\n              </Col>\r\n              <Col\r\n                span={4}\r\n                style={{\r\n                  display: \"flex\",\r\n                  justifyContent: \"center\",\r\n                  alignItems: \"center\",\r\n                }}>\r\n                <DeleteTwoTone\r\n                  twoToneColor=\"red\"\r\n                  style={{ fontSize: \"1rem\", marginRight: \"10px\" }}\r\n                  onClick={() => {\r\n                    handleDeleteNotif(item.id);\r\n                  }}\r\n                />\r\n              </Col>\r\n            </Row>\r\n          )}></List>\r\n      </Drawer>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SideBar;\r\n"]},"metadata":{},"sourceType":"module"}