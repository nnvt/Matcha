{"ast":null,"code":"import axios from \"axios\";\nimport { SUCCESS, FAILED, COMPLETE, USER_AUTH, LOGOUT } from \"./actionTypes\";\nimport { socketConn as socket } from \"../sockets\"; // ? Register Action\n\nexport const registerAction = async registerData => {\n  const config = {\n    headers: {\n      \"Content-Type\": \"application/json\"\n    }\n  };\n\n  try {\n    const res = await axios.post(\"http://localhost:3001/api/users/register\", registerData, config);\n    console.log(res);\n    if (res) return res.data;\n    return false;\n  } catch (error) {\n    return error.response.data;\n  }\n}; // ?Login Action\n\nexport const loginAction = async (loginData, dispatch) => {\n  const config = {\n    headers: {\n      \"Content-Type\": \"application/json\"\n    }\n  };\n\n  try {\n    var _res$data, _res$data2, _res$data3, _res$data4;\n\n    const res = await axios.post(\"http://localhost:3001/api/users/login\", loginData, config);\n    localStorage.setItem(\"token\", res.data.token);\n    socket.emit(\"login\", res.data.token);\n    dispatch({\n      type: SUCCESS,\n      payload: {\n        success: (_res$data = res.data) === null || _res$data === void 0 ? void 0 : _res$data.success,\n        successMessage: (_res$data2 = res.data) === null || _res$data2 === void 0 ? void 0 : _res$data2.message,\n        token: (_res$data3 = res.data) === null || _res$data3 === void 0 ? void 0 : _res$data3.token,\n        isCompletinfo: (_res$data4 = res.data) === null || _res$data4 === void 0 ? void 0 : _res$data4.isInfosComplete,\n        username: loginData.username\n      }\n    });\n    if (res.data) return res === null || res === void 0 ? void 0 : res.data;\n  } catch (error) {\n    var _error$response;\n\n    return (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data;\n  }\n}; // *LOGOUT Action\n\nexport const logoutAction = async (id, dispatch) => {\n  localStorage.removeItem(\"token\");\n  socket.emit(\"logout\", {\n    userid: id\n  });\n  dispatch({\n    type: LOGOUT,\n    payload: {}\n  });\n}; // ?Load user\n\nexport const setAuthUserData = async (data, dispatch) => {\n  try {\n    dispatch({\n      type: USER_AUTH,\n      payload: {\n        id: data.id,\n        username: data.username\n      }\n    });\n  } catch (error) {}\n}; // ? RESET ACTION\n\nexport const resetAction = async resetData => {\n  const config = {\n    headers: {\n      \"Content-Type\": \"application/json\"\n    }\n  };\n\n  try {\n    const res = await axios.post(\"http://localhost:3001/api/users/resetpassword\", resetData, config);\n    if (res) return res.data;\n  } catch (error) {\n    var _error$response2;\n\n    return (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.data;\n  }\n}; // ? changePasswordAction\n\nexport const changePasswordAction = async (newPassData, itoken) => {\n  const data = {\n    newpassword: newPassData.password,\n    confirmpassword: newPassData.password,\n    token: itoken\n  };\n  const config = {\n    headers: {\n      \"Content-Type\": \"application/json\"\n    }\n  };\n\n  try {\n    const res = await axios.patch(\"http://localhost:3001/api/users/newpassword\", data, config);\n    if (res) return res.data;\n  } catch (error) {\n    return error.response.data;\n  }\n}; // ? get user action\n\nexport const getUserAction = async (token, dispatch) => {\n  const config = {\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${token}`\n    }\n  };\n\n  try {\n    const res = await axios.get(\"http://localhost:3001/api/users/verify/isinfoscompleted\", config);\n    dispatch({\n      type: COMPLETE,\n      payload: {\n        success: res.data.success,\n        isCompletinfo: res.data.complete,\n        username: res.data.username,\n        id: res.data.userid\n      }\n    });\n    return true;\n  } catch (error) {\n    var _error$response3, _error$response4;\n\n    dispatch({\n      type: FAILED,\n      payload: {\n        success: (_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.data.success,\n        error: (_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : _error$response4.data.error\n      }\n    });\n    return false;\n  }\n}; // ? Steps Action\n\nexport const stepsAction = async (token, userData, dispatch) => {\n  const config = {\n    headers: {\n      \"Content-Type\": \"multipart/form-data\",\n      Authorization: `Bearer ${token}`\n    }\n  };\n  let CompletedData = Object.assign({}, userData);\n  let date = new Date(CompletedData.birthday._d);\n  const y = new Intl.DateTimeFormat(\"en\", {\n    year: \"numeric\"\n  }).format(date);\n  const m = new Intl.DateTimeFormat(\"en\", {\n    month: \"2-digit\"\n  }).format(date);\n  const d = new Intl.DateTimeFormat(\"en\", {\n    day: \"2-digit\"\n  }).format(date);\n  const BD = y + \"-\" + m + \"-\" + d;\n  CompletedData.tags = CompletedData.tags.map(item => {\n    return item.substring(1);\n  });\n  let form = new FormData();\n  form.set(\"gender\", CompletedData.gender);\n  form.set(\"looking\", CompletedData.interest);\n  form.set(\"bio\", CompletedData.bio);\n  form.set(\"tags\", CompletedData.tags);\n  form.set(\"birthday\", BD);\n  form.set(\"lat\", CompletedData.lat);\n  form.set(\"lang\", CompletedData.lang);\n  form.set(\"country\", CompletedData.country);\n  form.set(\"city\", CompletedData.city);\n  if (CompletedData.profile.length) form.append(\"profile\", CompletedData.profile[0]);\n  CompletedData.gallery.forEach(element => {\n    form.append(\"gallery\", element);\n  });\n\n  try {\n    const res = await axios.patch(\"http://localhost:3001/api/users/completeinfos\", form, config);\n    if (res) return res.data;\n  } catch (error) {\n    var _error$response5;\n\n    return (_error$response5 = error.response) === null || _error$response5 === void 0 ? void 0 : _error$response5.data;\n  }\n}; //* CHECK TOKEN IS VALID\n\nexport const checkTokenAction = async token => {\n  const config = {\n    headers: {\n      \"Content-Type\": \"application/json\"\n    }\n  };\n\n  try {\n    var _res$data5, _res$data6;\n\n    const res = await axios.post(\"http://localhost:3001/api/users/verify/token\", {\n      token: token\n    }, config);\n    if ((_res$data5 = res.data) === null || _res$data5 === void 0 ? void 0 : _res$data5.valide) return (_res$data6 = res.data) === null || _res$data6 === void 0 ? void 0 : _res$data6.valide;else {\n      localStorage.removeItem(\"token\");\n      return false;\n    }\n  } catch (error) {\n    localStorage.removeItem(\"token\");\n    return false;\n  }\n};","map":{"version":3,"sources":["C:/Users/ADMIN/Desktop/Matcha/client/src/actions/userAction.js"],"names":["axios","SUCCESS","FAILED","COMPLETE","USER_AUTH","LOGOUT","socketConn","socket","registerAction","registerData","config","headers","res","post","console","log","data","error","response","loginAction","loginData","dispatch","localStorage","setItem","token","emit","type","payload","success","successMessage","message","isCompletinfo","isInfosComplete","username","logoutAction","id","removeItem","userid","setAuthUserData","resetAction","resetData","changePasswordAction","newPassData","itoken","newpassword","password","confirmpassword","patch","getUserAction","Authorization","get","complete","stepsAction","userData","CompletedData","Object","assign","date","Date","birthday","_d","y","Intl","DateTimeFormat","year","format","m","month","d","day","BD","tags","map","item","substring","form","FormData","set","gender","interest","bio","lat","lang","country","city","profile","length","append","gallery","forEach","element","checkTokenAction","valide"],"mappings":"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","sourcesContent":["import axios from \"axios\";\r\nimport { SUCCESS, FAILED, COMPLETE, USER_AUTH, LOGOUT } from \"./actionTypes\";\r\nimport { socketConn as socket } from \"../sockets\";\r\n\r\n// ? Register Action\r\nexport const registerAction = async (registerData) => {\r\n  const config = {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n  };\r\n\r\n  try {\r\n    const res = await axios.post(\r\n      \"http://localhost:3001/api/users/register\",\r\n      registerData,\r\n      config\r\n    );\r\n\r\n    console.log(res)\r\n\r\n    if (res) return res.data;\r\n    return false;\r\n  } catch (error) {\r\n    return error.response.data;\r\n  }\r\n};\r\n\r\n// ?Login Action\r\nexport const loginAction = async (loginData, dispatch) => {\r\n  const config = {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n  };\r\n\r\n  try {\r\n    const res = await axios.post(\r\n      \"http://localhost:3001/api/users/login\",\r\n      loginData,\r\n      config\r\n    );\r\n    localStorage.setItem(\"token\", res.data.token);\r\n    socket.emit(\"login\", res.data.token);\r\n\r\n    dispatch({\r\n      type: SUCCESS,\r\n      payload: {\r\n        success: res.data?.success,\r\n        successMessage: res.data?.message,\r\n        token: res.data?.token,\r\n        isCompletinfo: res.data?.isInfosComplete,\r\n        username: loginData.username,\r\n      },\r\n    });\r\n\r\n    if (res.data) return res?.data\r\n\r\n  } catch (error) {\r\n\r\n    return error.response?.data;\r\n  }\r\n};\r\n\r\n// *LOGOUT Action\r\nexport const logoutAction = async (id, dispatch) => {\r\n  localStorage.removeItem(\"token\");\r\n  socket.emit(\"logout\", { userid: id });\r\n  dispatch({\r\n    type: LOGOUT,\r\n    payload: {},\r\n  });\r\n};\r\n\r\n// ?Load user\r\nexport const setAuthUserData = async (data, dispatch) => {\r\n  try {\r\n    dispatch({\r\n      type: USER_AUTH,\r\n      payload: {\r\n        id: data.id,\r\n        username: data.username,\r\n      },\r\n    });\r\n  } catch (error) { }\r\n};\r\n\r\n// ? RESET ACTION\r\nexport const resetAction = async (resetData) => {\r\n  const config = {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n  };\r\n  try {\r\n    const res = await axios.post(\r\n      \"http://localhost:3001/api/users/resetpassword\",\r\n      resetData,\r\n      config\r\n    );\r\n\r\n    if (res) return res.data;\r\n  } catch (error) {\r\n    return error.response?.data;\r\n  }\r\n};\r\n\r\n// ? changePasswordAction\r\nexport const changePasswordAction = async (newPassData, itoken) => {\r\n  const data = {\r\n    newpassword: newPassData.password,\r\n    confirmpassword: newPassData.password,\r\n    token: itoken,\r\n  };\r\n  const config = {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n  };\r\n  try {\r\n    const res = await axios.patch(\r\n      \"http://localhost:3001/api/users/newpassword\",\r\n      data,\r\n      config\r\n    );\r\n\r\n    if (res) return res.data;\r\n  } catch (error) {\r\n    return error.response.data;\r\n  }\r\n};\r\n\r\n// ? get user action\r\n\r\nexport const getUserAction = async (token, dispatch) => {\r\n  const config = {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n  };\r\n\r\n  try {\r\n    const res = await axios.get(\r\n      \"http://localhost:3001/api/users/verify/isinfoscompleted\",\r\n      config\r\n    );\r\n\r\n    dispatch({\r\n      type: COMPLETE,\r\n      payload: {\r\n        success: res.data.success,\r\n        isCompletinfo: res.data.complete,\r\n        username: res.data.username,\r\n        id: res.data.userid,\r\n      },\r\n    });\r\n    return true;\r\n  } catch (error) {\r\n    dispatch({\r\n      type: FAILED,\r\n      payload: {\r\n        success: error.response?.data.success,\r\n        error: error.response?.data.error,\r\n      },\r\n    });\r\n    return false;\r\n  }\r\n};\r\n\r\n// ? Steps Action\r\nexport const stepsAction = async (token, userData, dispatch) => {\r\n  const config = {\r\n    headers: {\r\n      \"Content-Type\": \"multipart/form-data\",\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n  };\r\n\r\n  let CompletedData = Object.assign({}, userData);\r\n\r\n  let date = new Date(CompletedData.birthday._d);\r\n  const y = new Intl.DateTimeFormat(\"en\", { year: \"numeric\" }).format(date);\r\n  const m = new Intl.DateTimeFormat(\"en\", { month: \"2-digit\" }).format(date);\r\n  const d = new Intl.DateTimeFormat(\"en\", { day: \"2-digit\" }).format(date);\r\n  const BD = y + \"-\" + m + \"-\" + d;\r\n\r\n  CompletedData.tags = CompletedData.tags.map((item) => {\r\n    return item.substring(1);\r\n  });\r\n  let form = new FormData();\r\n  form.set(\"gender\", CompletedData.gender);\r\n  form.set(\"looking\", CompletedData.interest);\r\n  form.set(\"bio\", CompletedData.bio);\r\n  form.set(\"tags\", CompletedData.tags);\r\n  form.set(\"birthday\", BD);\r\n  form.set(\"lat\", CompletedData.lat);\r\n  form.set(\"lang\", CompletedData.lang);\r\n  form.set(\"country\", CompletedData.country);\r\n  form.set(\"city\", CompletedData.city);\r\n\r\n  if (CompletedData.profile.length)\r\n    form.append(\"profile\", CompletedData.profile[0]);\r\n  CompletedData.gallery.forEach((element) => {\r\n    form.append(\"gallery\", element);\r\n  });\r\n\r\n  try {\r\n    const res = await axios.patch(\r\n      \"http://localhost:3001/api/users/completeinfos\",\r\n      form,\r\n      config\r\n    );\r\n\r\n    if (res) return res.data;\r\n  } catch (error) {\r\n    return error.response?.data;\r\n  }\r\n};\r\n\r\n//* CHECK TOKEN IS VALID\r\n\r\nexport const checkTokenAction = async (token) => {\r\n  const config = {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n  };\r\n\r\n  try {\r\n    const res = await axios.post(\r\n      \"http://localhost:3001/api/users/verify/token\",\r\n      { token: token },\r\n      config\r\n    );\r\n\r\n    if (res.data?.valide) return res.data?.valide;\r\n    else {\r\n      localStorage.removeItem(\"token\");\r\n      return false;\r\n    }\r\n  } catch (error) {\r\n    localStorage.removeItem(\"token\");\r\n    return false;\r\n  }\r\n};\r\n"]},"metadata":{},"sourceType":"module"}